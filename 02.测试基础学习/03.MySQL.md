# Chapter 1. æ•°æ®åº“ç®€ä»‹

## â…  æ•°æ®åº“åˆ†ç±»

- å…³ç³»å‹æ•°æ®åº“ `RDMS`
  - MySQL
  - Oracle
- éå…³ç³»å‹æ•°æ®åº“ ``
  - Redisï¼ˆé”®å€¼å‹key-valueï¼‰
  - MongoDBï¼ˆæ–‡æ¡£å‹ï¼‰



## â…¡ æ•°æ®ç±»å‹

- æ•´æ•°ï¼š`int`
  - æœ‰ç¬¦å·æ•´æ•°ï¼š-(2^31-1)~2^31-1
  - æ— ç¬¦å·æ•´æ•°ï¼š0~2^32-1
- å°æ•°ï¼š`decimal(5,2)`è¡¨ç¤ºå…±å­˜ 5 ä½æ•°ï¼Œå°æ•°å  2 ä½ï¼Œæ•´æ•°å  3 ä½
- å­—ç¬¦ä¸²ï¼š`varchar`ï¼š0~65535
- æ—¥æœŸæ—¶é—´ï¼š`datetime`



## â…¢ çº¦æŸ

- ä¸»é”®(primary key)ï¼šèƒ½å”¯â¼€ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯â¼€ä¸€æ¡è®°å½•çš„å±æ€§ç»„
- éç©º(not null)ï¼šæ­¤å­—æ®µä¸ï¥§å…è®¸å¡«å†™ç©ºå€¼
- å”¯ä¸€(unique)ï¼šæ­¤å­—æ®µçš„å€¼ä¸ï¥§å…è®¸é‡å¤
- é»˜è®¤å€¼(default)ï¼šå½“ä¸ï¥§å¡«å†™æ­¤å€¼æ—¶ä¼šä½¿â½¤ç”¨é»˜è®¤å€¼ï¼Œå¦‚æœå¡«å†™æ—¶ä»¥å¡«å†™ä¸ºå‡†
- å¤–é”®(foreign key)ï¼šâ¼€ä¸€ä¸ªè¡¨ä¸­çš„â¼€ä¸€ä¸ªå­—æ®µå¼•â½¤ç”¨å¦â¼€ä¸€ä¸ªè¡¨çš„ä¸»é”®



## â…£ è¡¨ç»“æ„æè¿°

è¡¨åç§°ï¼šdept

æè¿°ï¼šéƒ¨é—¨ä¿¡æ¯è¡¨

| è‹±æ–‡å­—æ®µåç§° | ä¸­æ–‡æè¿° | ç±»å‹        |
| ------------ | -------- | ----------- |
| DEPTNO       | éƒ¨é—¨ç¼–å· | INT(2)      |
| DNAME        | éƒ¨é—¨åç§° | VARCHAR(14) |
| LOC          | ä½ç½®     | VARCHAR(13) |

 

è¡¨åç§°ï¼šemp

æè¿°ï¼šå‘˜å·¥ä¿¡æ¯è¡¨

| è‹±æ–‡å­—æ®µåç§° | ä¸­æ–‡æè¿° | ç±»å‹         |
| ------------ | -------- | ------------ |
| EMPNO        | å‘˜å·¥ç¼–å· | INT (4)      |
| ENAME        | å‘˜å·¥å§“å | VARCHAR(10)  |
| JOB          | å·¥ä½œå²—ä½ | VARCHAR(9)   |
| MGR          | ä¸Šçº§é¢†å¯¼ | INT (4)      |
| HIREDATE     | å…¥èŒæ—¥æœŸ | DATE         |
| SAL          | è–ªæ°´     | DOUBLE(7,2)  |
| COMM         | æ´¥è´´     | DOUBLE (7,2) |
| DEPTNO       | éƒ¨é—¨ç¼–å· | INT(2)       |

æ³¨ï¼šDEPTNOå­—æ®µæ˜¯å¤–é”®ï¼ŒDEPTNOçš„å€¼æ¥æºäºdeptè¡¨çš„ä¸»é”®ï¼Œèµ·åˆ°äº†çº¦æŸçš„ä½œç”¨

è¡¨åç§°ï¼šsalgrade

æè¿°ï¼šè–ªæ°´ç­‰çº§ä¿¡æ¯è¡¨

| è‹±æ–‡å­—æ®µåç§° | ä¸­æ–‡æè¿° | ç±»å‹ |
| ------------ | -------- | ---- |
| GRADE        | ç­‰çº§     | INT  |
| LOSAL        | æœ€ä½è–ªæ°´ | INT  |
| HISAL        | æœ€é«˜è–ªæ°´ | INT  |



## â…¤å¤§å°å†™é—®é¢˜

MySQLåœ¨windowsä¸‹æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œå°†scriptæ–‡ä»¶å¯¼å…¥MySQLåè¡¨åä¹Ÿä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºå°å†™ï¼Œç»“æœå†æƒ³è¦å°†æ•°æ®åº“å¯¼å‡ºæ”¾åˆ°linuxæœåŠ¡å™¨ä¸­ä½¿ç”¨æ—¶å°±å‡ºé”™äº†ã€‚å› ä¸ºåœ¨linuxä¸‹è¡¨ååŒºåˆ†å¤§å°å†™è€Œæ‰¾ä¸åˆ°è¡¨ï¼ŒæŸ¥äº†å¾ˆå¤šéƒ½æ˜¯è¯´åœ¨linuxä¸‹æ›´æ”¹MySQLçš„è®¾ç½®ä½¿å…¶ä¹Ÿä¸åŒºåˆ†å¤§å°å†™ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰åŠæ³•åè¿‡æ¥è®©windows ä¸‹å¤§å°å†™æ•æ„Ÿå‘¢ã€‚å…¶å®æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œç›¸åº”çš„æ›´æ”¹windowsä¸­MySQLçš„è®¾ç½®å°±è¡Œäº†ã€‚

å…·ä½“æ“ä½œï¼š

åœ¨MySQLçš„é…ç½®æ–‡ä»¶my.iniä¸­å¢åŠ ä¸€è¡Œï¼š

```
lower_case_table_names = 0
```

å…¶ä¸­ 0ï¼šåŒºåˆ†å¤§å°å†™ï¼Œ1ï¼šä¸åŒºåˆ†å¤§å°å†™

MySQL åœ¨ Linux ä¸‹æ•°æ®åº“åã€è¡¨åã€åˆ—åã€åˆ«åå¤§å°å†™è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š

1. æ•°æ®åº“åä¸è¡¨åæ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„ï¼›
2. è¡¨çš„åˆ«åæ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„ï¼›
3. åˆ—åä¸åˆ—çš„åˆ«ååœ¨æ‰€æœ‰çš„æƒ…å†µä¸‹å‡æ˜¯å¿½ç•¥å¤§å°å†™çš„ï¼›
4. å˜é‡åä¹Ÿæ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„ï¼›  MySQL åœ¨ Windows ä¸‹éƒ½ä¸åŒºåˆ†å¤§å°å†™



# Chapter2. SQLè¯­å¥

## â…  æ•°æ®åº“æ“ä½œ

### ä¸€ã€åˆ›å»º&åˆ‡æ¢æ•°æ®åº“

```sql
-- åˆ›å»ºæ•°æ®åº“
create database æ•°æ®åº“åç§°;
-- åˆ‡æ¢æ•°æ®åº“
use æ•°æ®åº“åç§°;
```



### äºŒã€æŸ¥è¯¢å½“å‰ä½¿ç”¨çš„æ•°æ®åº“

```sql
select database();
```



### ä¸‰ã€ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼&æ’åºè§„åˆ™

```sql
ALTER DATABASE zq_test
DEFAULT CHARACTER SET utf8mb4
DEFAULT COLLATE utf8mb4_general_ci;
```



### å››ã€åˆ é™¤æ•°æ®åº“å’ŒæŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“

```sql
-- åˆ é™¤æ•°æ®åº“
DROP DATABASE zq_test;
--æŸ¥çœ‹æ‰€æœ‰åº“
SHOW DATABASES;
```



### äº”ã€æ•°æ®åº“å¤‡ä»½

```sql
# å¤‡ä»½è¯­æ³•ï¼šmysqldump -uç”¨æˆ·å -på¯†ç  -hä¸»æœº -Pç«¯å£ æ•°æ®åº“å [é€‰é¡¹] > å¤‡ä»½æ–‡ä»¶.sql
mysqldump -uroot -p123456 - test_db > x.sql
# è¿˜åŸè¯­æ³•ï¼šmysql -uç”¨æˆ·å -på¯†ç  -hä¸»æœº -Pç«¯å£ ç›®æ ‡æ•°æ®åº“å < å¤‡ä»½æ–‡ä»¶.sql
mysql -uroot -p123456 test_db < x.sql
```



## â…¡ æ•°æ®è¡¨æ“ä½œ

### ä¸€ã€åˆ›å»ºè¡¨

```sql
CREATE TABLE students ( 
    id INT UNSIGNED PRIMARY KEY auto_increment, 
    NAME VARCHAR ( 20 ), 
    age INT UNSIGNED, 
    height DECIMAL ( 5, 2 ) );
```



### äºŒã€æŸ¥çœ‹è¡¨

```sql
SHOW CREATE TABLE students;
```



### ä¸‰ã€å…ˆåˆ¤æ–­è¡¨æ˜¯å¦å­˜åœ¨ï¼Œå†ç§»é™¤å¹¶åˆ›å»º

```sql
DROP TABLE
IF
	EXISTS students;
CREATE TABLE students ( id INT UNSIGNED PRIMARY KEY auto_increment, NAME VARCHAR ( 20 ), age INT UNSIGNED, height DECIMAL ( 5, 2 ) );
```



### å››ã€é€šè¿‡Navicatå·¥å…·è·å–åˆ›è¡¨è¯­å¥çš„æ–¹æ³•

![image-20251128142110742](./assets/image-20251128142110742.png)



### äº”ã€æŸ¥çœ‹è¡¨ç»“æ„å’Œåˆ é™¤è¡¨

```sql
-- æŸ¥çœ‹è¡¨ç»“æ„(å­—æ®µ)
-- desc è¡¨å;
DESC auth_group;
-- åˆ é™¤è¡¨
-- drop table è¡¨å;
drop table students;
```



## â…¢ æ•°æ®æ“ä½œ

### ä¸€ã€å¢åŠ æ•°æ®

#### 1.1 å¢åŠ ä¸€è¡Œæ•°æ®

```sql
-- å¢åŠ â¼€ï¨ˆæ•°æ®
-- insert into è¡¨å values(...)
-- æ³¨æ„: 
-- 1. æ•°æ®å€¼éœ€è¦å’Œè¡¨çš„å­—æ®µâ¼€ä¸€å¯¹åº”(æ•°æ®ä¸ªæ•°åŠæ•°æ®ç±»å‹)
-- 2. ä¸»é”®åˆ—ï¦œæ˜¯è‡ªåŠ¨å¢é•¿ï¼Œæ’å…¥æ—¶éœ€è¦å ä½ï¼Œé€šå¸¸ä½¿â½¤ç”¨ 0 æˆ–è€… default æˆ–è€…
INSERT INTO students
VALUES
	( 0, 'zhangsan', 28, 1.78 );
	
-- å¢åŠ éƒ¨åˆ†å­—æ®µ
INSERT INTO students ( NAME, height )
VALUES
	( 'lisi', 1.68 );
```



#### 1.2 å¢åŠ å¤šè¡Œæ•°æ®

```sql
insert into students values(0, 'ç‹äº”1', 29, 1.78),(0, 'ç‹äº”2', 
30, 1.78);
```



#### 1.3 ä¿®æ”¹æ•°æ®

æ›´æ–°studentsè¡¨ä¸­ï¼Œid=9çš„æ•°æ®ã€‚å°†å…¶ageè®¾ä¸º48

```sql
update students set age=48 where id=9;
```



### äºŒã€åˆ é™¤æ•°æ®

#### 2.1 ä¸‰ç§åˆ é™¤å‘½ä»¤

- `delete from è¡¨å` :  åˆ é™¤æ‰€æœ‰æ•°æ®, ä½†æ˜¯ï¥§é‡ç½®ä¸»é”®å­—æ®µçš„è®¡æ•°
- `truncate table è¡¨å` : åˆ é™¤æ‰€æœ‰æ•°æ®, å¹¶é‡ç½®ä¸»é”®å­—æ®µçš„è®¡æ•°
- `drop table è¡¨å` : åˆ æ‰è¡¨(å­—æ®µå’Œæ•°æ®å‡ï¥§å†å­˜åœ¨)

```sql
DELETE FROM students WHERE id = 2;
TRUNCATE TABLE students;
DROP TABLE students;
```



#### 2.2 å›¾å½¢åŒ–ç•Œé¢

![image-20251128144045233](./assets/image-20251128144045233.png)

#### 2.3 é€»è¾‘åˆ é™¤

å¯¹äºé‡è¦çš„æ•°æ®ï¼Œï¥§èƒ½è½»ï§ æ‰§ï¨ˆ delete è¯­å¥è¿›ï¨ˆåˆ é™¤ã€‚å› ä¸ºâ¼€æ—¦åˆ é™¤ï¼Œæ•°æ®â½†æ³•æ¢å¤ï¼Œè¿™ æ—¶å¯ä»¥è¿›â¾é€»è¾‘åˆ é™¤ã€‚ 

1. ç»™è¡¨æ·»åŠ å­—æ®µï¼Œä»£è¡¨æ•°æ®æ˜¯å¦åˆ é™¤ï¼Œâ¼€èˆ¬èµ·å `isdelete`ï¼Œ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£ è¡¨åˆ é™¤ï¼Œé»˜è®¤å€¼ä¸º0
2. å½“è¦åˆ é™¤æŸæ¡æ•°æ®æ—¶ï¼Œåªéœ€è¦è®¾ç½®è¿™æ¡æ•°æ®çš„ isdelete å­—æ®µä¸º1 
3. ä»¥ååœ¨æŸ¥è¯¢æ•°æ®æ—¶ï¼ŒåªæŸ¥è¯¢å‡º `isdelete` ä¸º 0 çš„æ•°æ®

![image-20251128143613888](./assets/image-20251128143613888.png)

```sql
-- å°†id4çš„æ•°æ®è®¾ä¸ºåˆ é™¤
UPDATE students 
SET isdelete = 1 
WHERE
	id = 4;

-- æŸ¥è¯¢æ‰€æœ‰æœªåˆ é™¤æ•°æ®
SELECT
	* 
FROM
	students 
WHERE
	isdelete = 0;
```



# Chapter3. ç®€å•æŸ¥è¯¢

`select` è¯­å¥åé¢è·Ÿçš„æ˜¯å­—æ®µåç§°ï¼Œ`select` æ˜¯å…³é”®å­—ï¼Œ`select` å’Œå­—æ®µåç§°ä¹‹é—´é‡‡ç”¨ç©ºæ ¼éš”å¼€ï¼Œ`from` è¡¨ç¤ºå°†è¦æŸ¥è¯¢çš„è¡¨ï¼Œå®ƒå’Œå­—æ®µä¹‹é—´é‡‡ç”¨ç©ºæ ¼éš”å¼€,æŸ¥è¯¢å¤šä¸ªå­—æ®µï¼Œ`select` ä¸­çš„å­—æ®µé‡‡ç”¨**é€—å·**é—´éš”å³å¯ï¼Œæœ€åä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå°±æ˜¯åœ¨ `from` å‰é¢çš„å­—æ®µä¸èƒ½ä½¿ç”¨é€—å·äº†ã€‚

```sql
-- æŸ¥è¯¢å‘˜å·¥å§“å
select ename from emp;
-- æŸ¥è¯¢å‘˜å·¥çš„ç¼–å·å’Œå§“å
SELECT empno,ename FROM emp;
```

```sql
SELECT * FROM emp;
```

>  é‡‡ç”¨ `select * from emp` ï¼Œè™½ç„¶ç®€å•ï¼Œä½†æ˜¯ `*` å·ä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œå»ºè®®æŸ¥è¯¢å…¨éƒ¨å­—æ®µå°†ç›¸å…³å­—æ®µå†™åˆ°  `select` è¯­å¥çš„åé¢ï¼Œå†™æ˜å­—æ®µï¼Œè¿™æ ·å¯è¯»æ€§å¼º.

```sql
SELECT empno,ename,sal * 12 FROM emp;
```

åœ¨ `select` è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦ï¼Œä»¥ä¸Šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå¹´è–ªçš„å­—æ®µåç§°ä¸å¤ªæ˜ç¡®

1. å­—ç¬¦ä¸²å¿…é¡»æ·»åŠ å•å¼•å·æˆ–åŒå¼•å·
2. å…³é”®å­— `as` å¯ä»¥çœç•¥

```sql
select empno as â€˜å‘˜å·¥ç¼–å·â€™, ename as â€˜å‘˜å·¥å§“åâ€™, sal*12 as â€˜å¹´è–ªâ€™ from emp;
select empno  "å‘˜å·¥ç¼–å·", ename  "å‘˜å·¥å§“å", sal*12  "å¹´è–ª" from emp;
```



# Chapter4. æ¡ä»¶æŸ¥è¯¢

æ¡ä»¶æŸ¥è¯¢éœ€è¦ç”¨åˆ° where è¯­å¥ï¼Œwhere å¿…é¡»æ”¾åˆ° from è¯­å¥è¡¨çš„åé¢



```sql
-- æŸ¥è¯¢è–ªæ°´ä¸º5000çš„å‘˜å·¥
select empno, ename, sal from emp where sal=5000;
-- æŸ¥è¯¢jobä¸ºMANAGERçš„å‘˜å·¥
select empno, ename from emp where job="manager";
```

```sql
-- æŸ¥è¯¢è–ªæ°´ä¸ç­‰äº5000çš„å‘˜å·¥
select empno, ename, sal from emp where sal <> 5000;
-- æŸ¥è¯¢å·¥ä½œå²—ä½ä¸ç­‰äºMANAGERçš„å‘˜å·¥
select empno, ename from emp where job <> 'MANAGER';
```

```sql
-- æŸ¥è¯¢è–ªæ°´ä¸º1600åˆ°3000çš„å‘˜å·¥
-- æ³•1
select empno, ename, sal from emp where sal >= 1600 and sal <= 3000;
-- æ³•2
select empno, ename, sal from emp where sal between 1600 and 3000;
```

```sql
-- æŸ¥è¯¢æ´¥è´´ä¸ºç©ºçš„å‘˜å·¥
select * from emp where comm is null;
```

```sql
-- å·¥ä½œå²—ä½ä¸ºMANAGER,è–ªæ°´å¤§äº2500çš„å‘˜å·¥
select * from emp where job='MANAGER' and sal > 2500;
```

```sql
-- æŸ¥è¯¢å‡ºjobä¸ºmanageræˆ–è€…jobä¸ºsalesmançš„å‘˜å·¥
select * from emp where job='MANAGER' or job='SALESMAN';
```

```sql
-- æŸ¥è¯¢è–ªæ°´å¤§äº1800ï¼Œå¹¶ä¸”éƒ¨é—¨ä»£ç ä¸º20æˆ–30çš„å‘˜å·¥
select * from emp where sal > 1800 and (deptno = 20 or deptno = 30);

```

```sql
-- æŸ¥è¯¢å‡ºjobä¸ºmanageræˆ–è€…jobä¸ºsalesmançš„å‘˜å·¥
select * from emp where job in ('manager','salesman');
-- æŸ¥è¯¢å‡ºè–ªæ°´åŒ…å«1600å’Œè–ªæ°´åŒ…å«3000çš„å‘˜å·¥
select * from emp where sal in(1600, 3000);
```

```sql
-- æŸ¥è¯¢å‡ºè–ªæ°´ä¸åŒ…å«1600å’Œè–ªæ°´ä¸åŒ…å«3000çš„å‘˜å·¥
select * from emp where sal <> 1600 and sal <> 3000;
select * from emp where not (sal = 1600 or sal = 3000);
select * from emp where sal not in (1600, 3000);
-- æŸ¥è¯¢å‡ºæ´¥è´´ä¸ä¸ºnullçš„æ‰€æœ‰å‘˜å·¥
select * from emp where comm is not  null;
```

```sql
-- æŸ¥è¯¢å§“åä»¥Må¼€å¤´æ‰€æœ‰çš„å‘˜å·¥
select * from emp where ename like 'M%';
-- æŸ¥è¯¢å§“åä»¥Nç»“å°¾çš„æ‰€æœ‰çš„å‘˜å·¥
select * from emp where ename like '%N';
-- æŸ¥è¯¢å§“åä¸­åŒ…å«Oçš„æ‰€æœ‰çš„å‘˜å·¥
select * from emp where ename like '%O%';
-- æŸ¥è¯¢å§“åä¸­ç¬¬äºŒä¸ªå­—ç¬¦ä¸ºAçš„æ‰€æœ‰å‘˜å·¥
select * from emp where ename like '_A%';
```



# Chapter5. æ’åºé¡ºåº

æ’åºé‡‡ç”¨order byå­å¥ï¼Œorder byåé¢è·Ÿä¸Šæ’åºå­—æ®µï¼Œæ’åºå­—æ®µå¯ä»¥æ”¾å¤šä¸ªï¼Œå¤šä¸ªé‡‡ç”¨é€—å·é—´éš”ï¼Œorder byé»˜è®¤é‡‡ç”¨å‡åºï¼Œå¦‚æœå­˜åœ¨whereå­å¥é‚£ä¹ˆorder byå¿…é¡»æ”¾åˆ°whereè¯­å¥çš„åé¢

```sql
-- æŒ‰ç…§è–ªæ°´ç”±å°åˆ°å¤§æ’åº(ç³»ç»Ÿé»˜è®¤ç”±å°åˆ°å¤§)
select * from emp order by sal;
-- å–å¾—jobä¸ºMANAGERçš„å‘˜å·¥ï¼ŒæŒ‰ç…§è–ªæ°´ç”±å°åˆ°å¤§æ’åº(ç³»ç»Ÿé»˜è®¤ç”±å°åˆ°å¤§)
select * from emp where job='MANAGER' order by sal;
-- æŒ‰ç…§å¤šä¸ªå­—æ®µæ’åºï¼Œå¦‚ï¼šé¦–å…ˆæŒ‰ç…§jobæ’åºï¼Œå†æŒ‰ç…§salæ’åº
select * from emp order by job,sal;
```

```sql
-- æ‰‹åŠ¨æŒ‡å®šæŒ‰ç…§è–ªæ°´ç”±å°åˆ°å¤§æ’åº
select * from emp order by sal asc;
-- æ‰‹åŠ¨æŒ‡å®šæŒ‰ç…§è–ªæ°´ç”±å¤§åˆ°å°æ’åº
select * from emp order by sal desc;
```

```sql
-- æŒ‰ç…§jobå’Œè–ªæ°´å€’åº
select * from emp order by job desc, sal desc;
```

```sql
-- æŒ‰ç…§è–ªæ°´å‡åº(ä¸å»ºè®®ä½¿ç”¨)
select * from emp order by 6;
```



# Chapter6. åˆ†ç»„/èšåˆ/å¤šè¡Œå¤„ç†

| count | å–å¾—è®°å½•æ•° |
| ----- | ---------- |
| sum   | æ±‚å’Œ       |
| avg   | å–å¹³å‡     |
| max   | å–æœ€å¤§çš„æ•° |
| min   | å–æœ€å°çš„æ•° |

**æ³¨æ„ï¼šåˆ†ç»„å‡½æ•°è‡ªåŠ¨å¿½ç•¥ç©ºå€¼ï¼Œä¸éœ€è¦æ‰‹åŠ¨çš„åŠ where*æ¡ä»¶æ’é™¤ç©ºå€¼ã€‚**

**select count(\*) from emp where xxx;**            **ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•æ€»æ•°ã€‚**

**select count(comm) from emp;     commè¿™ä¸ªå­—æ®µä¸­ä¸ä¸ºç©ºçš„å…ƒç´ æ€»æ•°ã€‚**

```sql
-- å–å¾—æ‰€æœ‰çš„å‘˜å·¥æ•°
select count(*) from emp;
-- å–å¾—æ´¥è´´ä¸ä¸ºnullå‘˜å·¥æ•°
select count(comm) from emp;
-- å–å¾—å·¥ä½œå²—ä½çš„ä¸ªæ•° distanctå»é‡
select count(distinct job) from emp;
```

```sql
-- å–å¾—è–ªæ°´çš„åˆè®¡
select sum(sal) from emp;
-- å–å¾—æ´¥è´´çš„åˆè®¡
select sum(comm) from emp;
-- å–å¾—è–ªæ°´çš„åˆè®¡
select sum(sal+IFNULL(comm, 0)) from emp;
```

```sql
-- å–å¾—å¹³å‡è–ªæ°´
select avg(sal) from emp;
```

```sql
-- å–å¾—æœ€é«˜è–ªæ°´
select max(sal) from emp;
-- å–å¾—æœ€æ™šå…¥èŒå¾—å‘˜å·¥
select max(str_to_date (hiredate, '%Y-%m-%d')) from emp;
```

```sql
-- å–å¾—æœ€ä½è–ªæ°´
select min(sal) from emp;
-- å–å¾—æœ€æ—©å…¥èŒå¾—å‘˜å·¥ï¼ˆå¯ä»¥ä¸ä½¿ç”¨str_to_dateè½¬æ¢ï¼‰
select min(str_to_date(hiredate, '%Y-%m-%d')) from emp;
```

```sql
-- å¯ä»¥å°†è¿™äº›èšåˆå‡½æ•°éƒ½æ”¾åˆ°selectä¸­ä¸€èµ·ä½¿ç”¨
select count(*),sum(sal),avg(sal),max(sal),min(sal) from emp;
```



# Chapter7. åˆ†ç»„æŸ¥è¯¢

```sql
-- å–å¾—æ¯ä¸ªå·¥ä½œå²—ä½çš„å·¥èµ„åˆè®¡ï¼Œè¦æ±‚æ˜¾ç¤ºå²—ä½åç§°å’Œå·¥èµ„åˆè®¡
select job, sum(sal) from emp group by job;
select job,deptno,sum(sal) from emp group by job,deptno;
```

```sql
-- å–å¾—æ¯ä¸ªå²—ä½çš„å¹³å‡å·¥èµ„å¤§äº2000
select job, avg(sal) from emp group by job having avg(sal) >2000;
```



## selectè¯­å¥æ€»ç»“

```sql
SELECT
	å­—æ®µ 
FROM
	è¡¨å 
WHERE
GROUP BY
HAVING
ORDER BY
```



# Chapter8. è¿æ¥æŸ¥è¯¢(è·¨è¡¨æŸ¥è¯¢)

## â… SQL92è¯­æ³•

```sql
-- æ˜¾ç¤ºæ¯ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºæ‰€å±çš„éƒ¨é—¨åç§°ğŸ«·
select ename, dname from emp, dept;
```

ä»¥ä¸Šè¾“å‡ºï¼Œ**ä¸æ­£ç¡®**ï¼Œè¾“å‡ºäº† 56 æ¡æ•°æ®ï¼Œå…¶å®å°±æ˜¯ä¸¤ä¸ªè¡¨è®°å½•çš„æˆç»©ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬ç§°ä¸ºï¼šâ€œç¬›å¡å„¿ä¹˜ç§¯â€ï¼Œå‡ºç°é”™è¯¯çš„åŸå› æ˜¯ï¼šæ²¡æœ‰æŒ‡å®šè¿æ¥æ¡ä»¶

```sql
-- å†…è¿æ¥
select emp.ename, dept.dname from emp, dept where emp.deptno=dept.deptno;
```

```sql
-- å–å¾—å‘˜å·¥å’Œæ‰€å±çš„é¢†å¯¼çš„å§“å
-- è‡ªè¿æ¥
select e.ename, m.ename from emp e, emp m where e.mgr=m.empno;
```



## â…¡ SQL99è¯­æ³•

### ä¸€ã€å†…è¿æ¥

```sql
-- æ˜¾ç¤ºè–ªæ°´å¤§äº2000çš„å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºæ‰€å±çš„éƒ¨é—¨åç§°
-- é‡‡ç”¨SQL92è¯­æ³•ï¼š
select e.ename, e.sal, d.dname from emp e, dept d where e.deptno=d.deptno and  e.sal > 2000;
-- é‡‡ç”¨SQL99è¯­æ³•ï¼š
select e.ename, e.sal, d.dname from emp e join dept d on e.deptno=d.deptno where e.sal>2000;
```



### äºŒã€å¤–è¿æ¥

```sql
-- æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºæ‰€å±çš„éƒ¨é—¨åç§°ï¼Œå¦‚æœæŸä¸€ä¸ªéƒ¨é—¨æ²¡æœ‰å‘˜å·¥ï¼Œé‚£ä¹ˆè¯¥éƒ¨é—¨ä¹Ÿå¿…é¡»æ˜¾ç¤ºå‡ºæ¥
-- å³è¿æ¥ï¼š
select e.ename, e.sal, d.dname from emp e right join dept d on e.deptno=d.deptno;
-- å·¦è¿æ¥ï¼š
select e.ename, e.sal, d.dname from dept d left join emp e on e.deptno=d.deptno;
```



### ä¸‰ã€è¿æ¥æ€»ç»“

#### 3.1 åˆ†ç±»

- å†…è¿æ¥

  - ```sql
    è¡¨1 inner join è¡¨2 on å…³è”æ¡ä»¶
    ```

  - åšè¿æ¥æŸ¥è¯¢çš„æ—¶å€™ä¸€å®šè¦å†™ä¸Šå…³è”æ¡ä»¶

  - inner å¯ä»¥çœç•¥

- å¤–è¿æ¥

  - å·¦å¤–è¿æ¥

    - ```sql
      è¡¨1 left outer join è¡¨2 on å…³è”æ¡ä»¶
      ```

    - åšè¿æ¥æŸ¥è¯¢çš„æ—¶å€™ä¸€å®šè¦å†™ä¸Šå…³è”æ¡ä»¶

    - outer å¯ä»¥çœç•¥

  - å³å¤–è¿æ¥

    - è¡¨1 right outer join è¡¨2 on å…³è”æ¡ä»¶

    - åšè¿æ¥æŸ¥è¯¢çš„æ—¶å€™ä¸€å®šè¦å†™ä¸Šå…³è”æ¡ä»¶

    - outer å¯ä»¥çœç•¥



#### 3.2 å·¦å¤–è¿æ¥ï¼ˆå·¦è¿æ¥ï¼‰å’Œå³å¤–è¿æ¥ï¼ˆå³è¿æ¥ï¼‰çš„åŒºåˆ«

å·¦è¿æ¥ä»¥å·¦é¢çš„è¡¨ä¸ºå‡†å’Œå³è¾¹çš„è¡¨æ¯”è¾ƒï¼Œå’Œå·¦è¡¨ç›¸ç­‰çš„ä¸ç›¸ç­‰éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œå³è¡¨ç¬¦åˆæ¡ä»¶çš„æ˜¾ç¤º,ä¸ç¬¦åˆæ¡ä»¶çš„ä¸æ˜¾ç¤º

å³è¿æ¥æ°æ°ç›¸åï¼Œä»¥ä¸Šå·¦è¿æ¥å’Œå³è¿æ¥ä¹Ÿå¯ä»¥åŠ å…¥outerå…³é”®å­—ï¼Œä½†ä¸€èˆ¬ä¸å»ºè®®è¿™ç§å†™æ³•

```sql
select e.ename, e.sal, d.dname from emp e right outer join dept d on e.deptno=d.deptno;
select e.ename, e.sal, d.dname from dept d left outer join emp e on e.deptno=d.deptno;
```

å·¦è¿æ¥èƒ½å®Œæˆçš„åŠŸèƒ½å³è¿æ¥ä¸€å®šå¯ä»¥å®Œæˆ



# Chapter9. å­æŸ¥è¯¢

å­æŸ¥è¯¢å°±æ˜¯åµŒå¥—çš„selectè¯­å¥ï¼Œå¯ä»¥ç†è§£ä¸ºå­æŸ¥è¯¢æ˜¯ä¸€å¼ è¡¨



## â…  åœ¨whereè¯­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢

```sql
-- æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼ŒæŸ¥è¯¢å“ªäº›äººæ˜¯ç®¡ç†è€…ï¼Œè¦æ±‚æ˜¾ç¤ºå‡ºå…¶å‘˜å·¥ç¼–å·å’Œå‘˜å·¥å§“å
-- 1ã€é¦–å…ˆå–å¾—ç®¡ç†è€…çš„ç¼–å·ï¼Œå»é™¤é‡å¤çš„
select distinct mgr from emp where mgr is not null;
-- 2ã€æŸ¥è¯¢å‘˜å·¥ç¼–å·åŒ…å«ç®¡ç†è€…ç¼–å·çš„
select empno, ename from emp where empno in(select mgr from emp where mgr is not null);
-- 3ã€æŸ¥è¯¢å“ªäº›äººçš„è–ªæ°´é«˜äºå‘˜å·¥çš„å¹³å‡è–ªæ°´ï¼Œéœ€è¦æ˜¾ç¤ºå‘˜å·¥ç¼–å·ï¼Œå‘˜å·¥å§“åï¼Œè–ªæ°´
select avg(sal) from emp;
select empno, ename, sal from emp where sal > (select avg(sal) from emp);
```



## â…¡ åœ¨fromè¯­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢

```sql
-- æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼ŒæŸ¥è¯¢å“ªäº›äººæ˜¯ç®¡ç†è€…ï¼Œè¦æ±‚æ˜¾ç¤ºå‡ºå…¶å‘˜å·¥ç¼–å·å’Œå‘˜å·¥å§“å

-- 1ã€é¦–å…ˆå–å¾—ç®¡ç†è€…çš„ç¼–å·ï¼Œå»é™¤é‡å¤çš„
select distinct mgr from emp where mgr is not null;
-- 2ã€å°†ä»¥ä¸ŠæŸ¥è¯¢ä½œä¸ºä¸€å¼ è¡¨ï¼Œæ”¾åˆ°fromè¯­å¥çš„åé¢
-- ä½¿ç”¨92è¯­æ³•ï¼š
select e.empno, e.ename from emp e, (select distinct mgr from emp where mgr is not null) m where e.empno=m.mgr;
-- ä½¿ç”¨99è¯­æ³•ï¼š
select e.empno, e.ename from emp e join (select distinct mgr from emp where mgr is not null) m on e.empno=m.mgr;
-- 3ã€æŸ¥è¯¢å„ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªæ°´æ‰€å±ç­‰çº§ï¼Œéœ€è¦æ˜¾ç¤ºéƒ¨é—¨ç¼–å·ï¼Œå¹³å‡è–ªæ°´ï¼Œç­‰çº§ç¼–å·
-- é¦–å…ˆå–å¾—å„ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªæ°´
select deptno, avg(sal) avg_sal from emp group by deptno;
-- å°†éƒ¨é—¨çš„å¹³å‡è–ªæ°´ä½œä¸ºä¸€å¼ è¡¨ä¸è–ªæ°´ç­‰çº§è¡¨å»ºç«‹è¿æ¥ï¼Œå–å¾—ç­‰çº§
select deptno,avg(sal) avg_sal from emp group by deptno;
select * from salgrade;
select a.deptno,a.avg_sal,g.grade from (select deptno,avg(sal) avg_sal from emp group by deptno ) a join salgrade g on a.avg_sal between g.losal and hisal;
```



## â…¢ åœ¨selectè¯­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢

```sql
-- æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºå‡ºå‘˜å·¥æ‰€å±çš„éƒ¨é—¨åç§°
-- æ³•1ï¼šå°†å‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨è¿æ¥
select e.ename, d.dname from emp e, dept d where e.deptno=d.deptno;
```

```sql
-- æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æ˜¾ç¤ºå‡ºå‘˜å·¥æ‰€å±çš„éƒ¨é—¨åç§°
-- æ³•2ï¼šåœ¨selectè¯­å¥ä¸­å†æ¬¡åµŒå¥—selectè¯­å¥å®Œæˆéƒ¨åˆ†åç§°çš„æŸ¥è¯¢
select e.ename, (select d.dname from dept d where e.deptno=d.deptno) as dname from emp e;
```



# Chapter10. union

union ç”¨äºåˆå¹¶é›†åˆ

```sql
-- æŸ¥è¯¢jobåŒ…å«MANAGERå’ŒåŒ…å«SALESMANçš„å‘˜å·¥
select * from emp where job in('MANAGER', 'SALESMAN');
```

```sql
-- é‡‡ç”¨unionæ¥åˆå¹¶
select * from emp where job='MANAGER'
union
select * from emp where job='SALESMAN'
```

åˆå¹¶ç»“æœé›†çš„æ—¶å€™ï¼Œéœ€è¦æŸ¥è¯¢å­—æ®µå¯¹åº”ä¸ªæ•°ç›¸åŒã€‚*åœ¨**Oracle**ä¸­æ›´ä¸¥æ ¼ï¼Œä¸ä½†è¦æ±‚ä¸ªæ•°ç›¸åŒï¼Œè€Œä¸”è¿˜è¦æ±‚ç±»å‹å¯¹åº”ç›¸åŒ*ã€‚

# Chapter11. limit

MySQL æä¾›äº†limit ï¼Œä¸»è¦ç”¨äºæå–å‰å‡ æ¡æˆ–è€…ä¸­é—´æŸå‡ è¡Œæ•°æ®

```sql
-- å…¶ä¸­mæ˜¯æŒ‡è®°å½•å¼€å§‹çš„indexï¼Œä»0å¼€å§‹ï¼Œè¡¨ç¤ºç¬¬ä¸€æ¡è®°å½•
-- næ˜¯æŒ‡ä»ç¬¬m+1æ¡å¼€å§‹ï¼Œå–næ¡ã€‚
select * from table limit m,n
-- å³å–å‡ºç¬¬3æ¡è‡³ç¬¬6æ¡ï¼Œ4æ¡è®°å½•
select * from tablename limit 2,4
```

```sql
-- å–å¾—å‰5æ¡æ•°æ®
select * from emp  limit 5;
```

```sql
-- ä»ç¬¬äºŒæ¡å¼€å§‹å–ä¸¤æ¡æ•°æ®
select * from emp  limit 1,2;
```

```sql
-- å–å¾—è–ªæ°´æœ€é«˜çš„å‰5å
select  * from emp e  order by e.sal desc limit 5;
```





```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

```sql
```

# Chapter . Navicat å›¾å½¢é¡µé¢åŒ–æ“ä½œ

## â…  æ•´æ•°æ— ç¬¦å·è®¾ç½®

<img src="./assets/image-20251128101032617.png" alt="image-20251128101032617" style="zoom: 50%;" />

## â…¡ çº¦æŸ

### ä¸€ã€ ä¸»é”®&ä¸ä¸ºç©º

![image-20251128102009880](./assets/image-20251128102009880.png)





### äºŒã€ å”¯ä¸€

![image-20251128102235613](./assets/image-20251128102235613.png)



### ä¸‰ã€ é»˜è®¤

![image-20251128102359899](./assets/image-20251128102359899.png)



## â…¢ æ‰“å¼€å‘½ä»¤è¡Œ

![image-20251128102536468](./assets/image-20251128102536468.png)

## â…£ æ•°æ®åº“å¤‡ä»½

![image-20251128105923718](./assets/image-20251128105923718.png)

![image-20251128110059121](./assets/image-20251128110059121.png)

