<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Python 3.0 有什么新变化" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/3.0.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="作者, Guido van Rossum,. 本文介绍 Python 3.0 与 2.6 相比的新特性。 Python 3.0 也被称为 &quot;Python 3000&quot; 或 &quot;Py3K&quot;，是有史以来第一个 有意向下不兼容 的 Python 版本。 Python 3.0 于 2008 年 12 月 3 日发布。 与一般的发布版本相比，Python 3.0 有..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://docs.python.org/3.14/zh-cn/_images/social_previews/summary_whatsnew_3.0_d87d5542.png" />
<meta property="og:image:alt" content="作者, Guido van Rossum,. 本文介绍 Python 3.0 与 2.6 相比的新特性。 Python 3.0 也被称为 &quot;Python 3000&quot; 或 &quot;Py3K&quot;，是有史以来第一个 有意向下不兼容 的 Python 版本。 Python 3.0 于 2008 年 12 月 3 日发布。 与一般的发布版本相比，Python 3.0 有..." />
<meta name="description" content="作者, Guido van Rossum,. 本文介绍 Python 3.0 与 2.6 相比的新特性。 Python 3.0 也被称为 &quot;Python 3000&quot; 或 &quot;Py3K&quot;，是有史以来第一个 有意向下不兼容 的 Python 版本。 Python 3.0 于 2008 年 12 月 3 日发布。 与一般的发布版本相比，Python 3.0 有..." />
<meta name="twitter:card" content="summary_large_image" />
<meta name="theme-color" content="#3776ab">

    <title>Python 3.0 有什么新变化 &#8212; Python 3.14.0 文档</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=234b1a7c" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?v=8cd84f99" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css?v=5349f25f" />
    
    <script src="../_static/documentation_options.js?v=a595ec0e"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Python 3.14.0 文档 中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="关于此文档" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="copyright" title="版权" href="../copyright.html" />
    <link rel="next" title="Python 2.7 有什么新变化" href="2.7.html" />
    <link rel="prev" title="Python 3.1 有什么新变化" href="3.1.html" />
    
      
      <script defer file-types="bz2,epub,zip" data-domain="docs.python.org" src="https://analytics.python.org/js/script.file-downloads.outbound-links.js"></script>
      
      <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.0.html">
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg">
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 
            <script type="text/javascript" src="../_static/rtd_switcher.js"></script>
            <meta name="readthedocs-addons-api-version" content="1">

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="菜单">
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Python logo">
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="快速搜索" aria-label="快速搜索" type="search" name="q">
                <input type="submit" value="转到">
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    主题
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>自动</option>
        <option value="light">明亮</option>
        <option value="dark">黑暗</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">Python 3.0 有什么新变化</a><ul>
<li><a class="reference internal" href="#common-stumbling-blocks">常见的绊脚石</a><ul>
<li><a class="reference internal" href="#print-is-a-function">Print 是函数</a></li>
<li><a class="reference internal" href="#views-and-iterators-instead-of-lists">用视图和迭代器取代列表</a></li>
<li><a class="reference internal" href="#ordering-comparisons">排序比较</a></li>
<li><a class="reference internal" href="#integers">整数</a></li>
<li><a class="reference internal" href="#text-vs-data-instead-of-unicode-vs-8-bit">文本与数据而不是 Unicode 与 8 比特位</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overview-of-syntax-changes">语法变化概述</a><ul>
<li><a class="reference internal" href="#new-syntax">新语法</a></li>
<li><a class="reference internal" href="#changed-syntax">语法变化</a></li>
<li><a class="reference internal" href="#removed-syntax">移除的语法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-already-present-in-python-2-6">已存在于 Python 2.6 中的改变</a></li>
<li><a class="reference internal" href="#library-changes">库的修改</a></li>
<li><a class="reference internal" href="#pep-3101-a-new-approach-to-string-formatting"><strong>PEP 3101</strong>: 字符串格式化的新方式</a></li>
<li><a class="reference internal" href="#changes-to-exceptions">对异常的修改</a></li>
<li><a class="reference internal" href="#miscellaneous-other-changes">其他杂项修改</a><ul>
<li><a class="reference internal" href="#operators-and-special-methods">运算符与特殊方法</a></li>
<li><a class="reference internal" href="#builtins">内置对象</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">构建和 C API 的改变</a></li>
<li><a class="reference internal" href="#performance">性能</a></li>
<li><a class="reference internal" href="#porting-to-python-3-0">移植到 Python 3.0</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="3.1.html"
                          title="上一章">Python 3.1 有什么新变化</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="2.7.html"
                          title="下一章">Python 2.7 有什么新变化</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>当前页</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">报告代码错误</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.0.rst?plain=1"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="2.7.html" title="Python 2.7 有什么新变化"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="3.1.html" title="Python 3.1 有什么新变化"
             accesskey="P">上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.14.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Python的新变化</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Python 3.0 有什么新变化</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="search" name="q" id="search-box">
          <input type="submit" value="转到">
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    主题
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>自动</option>
        <option value="light">明亮</option>
        <option value="dark">黑暗</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-0">
<h1 class="translated">Python 3.0 有什么新变化<a class="headerlink" href="#what-s-new-in-python-3-0" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd translated">作者<span class="colon">:</span></dt>
<dd class="field-odd translated"><p class="translated">Guido van Rossum</p>
</dd>
</dl>
<p class="translated">本文介绍 Python 3.0 与 2.6 相比的新特性。 Python 3.0 也被称为 &quot;Python 3000&quot; 或 &quot;Py3K&quot;，是有史以来第一个 <em>有意向下不兼容</em> 的 Python 版本。 Python 3.0 于 2008 年 12 月 3 日发布。 与一般的发布版本相比，Python 3.0 有更多的变化，而且对所有 Python 用户都很重要。 不过，在理解了这些改动之后，您会发现 Python 其实并没有太大的变化 -- 总的来说，我们主要是修复了一些众所周知的问题和缺陷，并删除了许多旧的垃圾。</p>
<p class="translated">本文并不试图提供所有新特性的完整规范，而是试图提供一个方便的概述。 要了解完整的细节，您应该参考 Python 3.0 的文档和/或文中引用的许多 PEP。 如果您想了解某个特性的完整实现和设计原理，PEP 通常比常规文档有更多的细节；但要注意的是，一旦某个特性被完全实现，PEP 通常不会保持更新。</p>
<p class="translated">由于时间有限，本文档不够完整。 对于新发布的版本，源代码发行版中的 <code class="docutils literal notranslate"><span class="pre">Misc/NEWS</span></code> 文件总是包含大量关于每一个细小改动的详细信息。</p>
<section id="common-stumbling-blocks">
<h2 class="translated">常见的绊脚石<a class="headerlink" href="#common-stumbling-blocks" title="Link to this heading">¶</a></h2>
<p class="translated">本节列出了在你已习惯了 Python 2.5 的情况下最有可能让您感到困惑的几处更改。</p>
<section id="print-is-a-function">
<h3 class="translated">Print 是函数<a class="headerlink" href="#print-is-a-function" title="Link to this heading">¶</a></h3>
<p class="translated"><code class="docutils literal notranslate"><span class="pre">print</span></code> 语句已被 <a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> 函数取代，其关键字参数取代了旧 <code class="docutils literal notranslate"><span class="pre">print</span></code> 语句 (<span class="target" id="index-72"></span><a class="pep reference external" href="https://peps.python.org/pep-3105/"><strong>PEP 3105</strong></a>) 的大部分特殊语法。 示例:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">旧</span><span class="p">:</span> <span class="nb">print</span> <span class="s2">&quot;The answer is&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="mi">2</span>
<span class="n">新</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The answer is&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

<span class="n">旧</span><span class="p">:</span> <span class="nb">print</span> <span class="n">x</span><span class="p">,</span>           <span class="c1"># 末尾逗号将抑制换行符</span>
<span class="n">新</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>  <span class="c1"># 添加一个空格代替换行符</span>

<span class="n">旧</span><span class="p">:</span> <span class="nb">print</span>              <span class="c1"># 打印一个换行符</span>
<span class="n">新</span><span class="p">:</span> <span class="nb">print</span><span class="p">()</span>            <span class="c1"># 你必须调用函数！</span>

<span class="n">旧</span><span class="p">:</span> <span class="nb">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;fatal error&quot;</span>
<span class="n">新</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;fatal error&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

<span class="n">旧</span><span class="p">:</span> <span class="nb">print</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>       <span class="c1"># 打印 repr((x, y))</span>
<span class="n">新</span><span class="p">:</span> <span class="nb">print</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>      <span class="c1"># 不同于 print(x, y)！</span>
</pre></div>
</div>
<p class="translated">你还可以自定义条目间的分隔符，例如</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are &lt;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span><span class="p">,</span> <span class="s2">&quot;&gt; possibilities!&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="translated">这将产生如下结果:</p>
<div class="translated highlight-none notranslate"><div class="highlight"><pre><span></span>There are &lt;4294967296&gt; possibilities!
</pre></div>
</div>
<p class="translated">注意</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> 函数不支持旧 <code class="docutils literal notranslate"><span class="pre">print</span></code> 语句的 &quot;softspace&quot; 功能。例如，在 Python 2.x 中，<code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">&quot;A\n&quot;,</span> <span class="pre">&quot;B&quot;</span></code> 会写入 <code class="docutils literal notranslate"><span class="pre">&quot;A\nB\n&quot;</span></code>；但在 Python 3.0 中，<code class="docutils literal notranslate"><span class="pre">print(&quot;A\n&quot;,</span> <span class="pre">&quot;B&quot;)</span></code> 会写入 <code class="docutils literal notranslate"><span class="pre">&quot;A\n</span> <span class="pre">B\n&quot;</span></code>。</p></li>
<li><p class="translated">最初，您会发现自己在交互模式下经常输入旧的 <code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">x</span></code> 。是时候重新训练你的手指以输入 <code class="docutils literal notranslate"><span class="pre">print(x)</span></code> 了！</p></li>
<li><p class="translated">使用 <code class="docutils literal notranslate"><span class="pre">2to3</span></code> 源代码到源代码转换工具时，所有 <code class="docutils literal notranslate"><span class="pre">print</span></code> 语句都会自动转换为 <a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> 函数调用，因此对于大型项目来说，这基本上不是问题。</p></li>
</ul>
</section>
<section id="views-and-iterators-instead-of-lists">
<h3 class="translated">用视图和迭代器取代列表<a class="headerlink" href="#views-and-iterators-instead-of-lists" title="Link to this heading">¶</a></h3>
<p class="translated">某些知名的 API 将不再返回列表:</p>
<ul>
<li><p class="translated"><a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> 方法 <a class="reference internal" href="../library/stdtypes.html#dict.keys" title="dict.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.keys()</span></code></a>、<a class="reference internal" href="../library/stdtypes.html#dict.items" title="dict.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.items()</span></code></a> 和 <a class="reference internal" href="../library/stdtypes.html#dict.values" title="dict.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.values()</span></code></a> 返回 “视图” 而不是列表。 例如，这个写法不再有效: <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">=</span> <span class="pre">d.keys();</span> <span class="pre">k.sort()</span></code>。 请使用 <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">=</span> <span class="pre">sorted(d)</span></code> 代替（这在 Python 2.5 中也有效，而且同样高效）。</p></li>
<li><p class="translated">此外，<code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.iterkeys()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.iteritems()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.itervalues()</span></code> 等方法将不再被支持。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a> 和 <a class="reference internal" href="../library/functions.html#filter" title="filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter()</span></code></a> 均返回迭代器。 如果你确实需要一个列表并且所有输入序列的长度相等，简单的解决办法是将 <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a> 包装在 <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal notranslate"><span class="pre">list()</span></code></a> 中，例如 <code class="docutils literal notranslate"><span class="pre">list(map(...))</span></code>，但更好的办法通常是使用列表推导式（特别是当原始代码使用了 <a class="reference internal" href="../reference/expressions.html#lambda"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">lambda</span></code></a> 的时候），或是重写代码使得它完全不需要列表。 还有一种特殊技巧是将 <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a> 作为函数的附带影响被唤起；正确的转换方式是使用一个常规的 <a class="reference internal" href="../reference/compound_stmts.html#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a> 循环（因为创建列表会浪费资源）。</p>
<p class="translated">如果输入序列的长度不相等，<a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a> 将在最短序列的终点停止。 为了与 Python 2.x 中的 <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a> 完全兼容，也可将序列包装在 <a class="reference internal" href="../library/itertools.html#itertools.zip_longest" title="itertools.zip_longest"><code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.zip_longest()</span></code></a> 中，例如将 <code class="docutils literal notranslate"><span class="pre">map(func,</span> <span class="pre">*sequences)</span></code> 变成 <code class="docutils literal notranslate"><span class="pre">list(map(func,</span> <span class="pre">itertools.zip_longest(*sequences)))</span></code>。</p>
</li>
<li><p class="translated">现在 <a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></a> 的行为与过去 <code class="xref py py-func docutils literal notranslate"><span class="pre">xrange()</span></code> 的行为类似，区别在于它能处理任意大小的值。 后者已不复存在。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/functions.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> 现在将返回一个迭代器。</p></li>
</ul>
</section>
<section id="ordering-comparisons">
<h3 class="translated">排序比较<a class="headerlink" href="#ordering-comparisons" title="Link to this heading">¶</a></h3>
<p class="translated">Python 3.0 简化了排序比较的规则：</p>
<ul class="simple">
<li><p class="translated">当操作数不存在有意义的自然排序时，排序比较操作符 (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>) 会引发 TypeError 异常。 因此，像 <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">&lt;</span> <span class="pre">''</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&gt;</span> <span class="pre">None</span></code> 或 <code class="docutils literal notranslate"><span class="pre">len</span> <span class="pre">&lt;=</span> <span class="pre">len</span></code> 这样的表达式不再有效，例如 <code class="docutils literal notranslate"><span class="pre">None</span> <span class="pre">&lt;</span> <span class="pre">None</span></code> 会引发 <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> 而不是返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。 由此推论，对异构列表进行排序不再有意义 —— 所有元素必须相互可比。 请注意，这不适用于 <code class="docutils literal notranslate"><span class="pre">==</span></code> 和 <code class="docutils literal notranslate"><span class="pre">!=</span></code> 操作符：不同的不可比类型的对象总是互不相等的。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/functions.html#sorted" title="sorted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sorted()</span></code></a> 和 <a class="reference internal" href="../library/stdtypes.html#list.sort" title="list.sort"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list.sort()</span></code></a> 不再接受提供比较函数的 <em>cmp</em> 参数。 请改用 <em>key</em> 参数。 注意 <em>key</em> 和 <em>reverse</em> 参数现在都是“仅限关键字”参数。</p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">cmp()</span></code> 函数应视为已不复存在，而 <code class="xref py py-meth docutils literal notranslate"><span class="pre">__cmp__()</span></code> 特殊方法再不再受支持。 请使用 <a class="reference internal" href="../reference/datamodel.html#object.__lt__" title="object.__lt__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__lt__()</span></code></a> 进行排序，并根据需要使用 <a class="reference internal" href="../reference/datamodel.html#object.__eq__" title="object.__eq__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__eq__()</span></code></a> 与 <a class="reference internal" href="../reference/datamodel.html#object.__hash__" title="object.__hash__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__hash__()</span></code></a>，以及其他富比较操作。 （如果你确实需要 <code class="xref py py-func docutils literal notranslate"><span class="pre">cmp()</span></code> 的功能，你可以使用表达式 <code class="docutils literal notranslate"><span class="pre">(a</span> <span class="pre">&gt;</span> <span class="pre">b)</span> <span class="pre">-</span> <span class="pre">(a</span> <span class="pre">&lt;</span> <span class="pre">b)</span></code> 作为 <code class="docutils literal notranslate"><span class="pre">cmp(a,</span> <span class="pre">b)</span></code> 的等价形式。）</p></li>
</ul>
</section>
<section id="integers">
<h3 class="translated">整数<a class="headerlink" href="#integers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p class="translated"><span class="target" id="index-73"></span><a class="pep reference external" href="https://peps.python.org/pep-0237/"><strong>PEP 237</strong></a>: 在实质上，<code class="xref py py-class docutils literal notranslate"><span class="pre">long</span></code> 已改名为 <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>。 也就是说，只存在一种内置整数类型，即 <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>；但其行为与旧的 <code class="xref py py-class docutils literal notranslate"><span class="pre">long</span></code> 类型极其相似。</p></li>
<li><p class="translated"><span class="target" id="index-74"></span><a class="pep reference external" href="https://peps.python.org/pep-0238/"><strong>PEP 238</strong></a>: 像 <code class="docutils literal notranslate"><span class="pre">1/2</span></code> 这样的表达式将返回一个浮点数。 请使用 <code class="docutils literal notranslate"><span class="pre">1//2</span></code> 来得到取整的行为。 （后面这种语法已存在多年，至少从 Python 2.2 起就有了。）</p></li>
<li><p class="translated"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.maxint</span></code> 常量已被移除，因为整数的值不再有任何限制。 不过，<a class="reference internal" href="../library/sys.html#sys.maxsize" title="sys.maxsize"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.maxsize</span></code></a> 也可被用作大于任何实际列表或字符串索引的整数。 它与具体实现的“自然”整数大小保持一致并且通常与同一平台上之前发布版中的 <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.maxint</span></code> 相同（假定使用相同的构建选项）。</p></li>
<li><p class="translated">长整数的 <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> 不再包括尾部的 <code class="docutils literal notranslate"><span class="pre">L</span></code>，因此无条件地删除该字符的代码会删除最后一位数字。 （请使用 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a> 代替。）</p></li>
<li><p class="translated">八进制数字面值不再是 <code class="docutils literal notranslate"><span class="pre">0720</span></code> 的形式；而是改用 <code class="docutils literal notranslate"><span class="pre">0o720</span></code> 的形式。</p></li>
</ul>
</section>
<section id="text-vs-data-instead-of-unicode-vs-8-bit">
<h3 class="translated">文本与数据而不是 Unicode 与 8 比特位<a class="headerlink" href="#text-vs-data-instead-of-unicode-vs-8-bit" title="Link to this heading">¶</a></h3>
<p class="translated">你对二进制数据和 Unicode 的所有认知都已改变。</p>
<ul class="simple">
<li><p class="translated">Python 3.0 使用 <em>文本</em> 和 (二进制) <em>数据</em> 等概念来替代 Unicode 字符串和 8 位字符串。 所有文本均使用 Unicode；不过 <em>已编码</em> Unicode 是以二进制数据来表示的。 用于存放文本的类型是 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>，用于存放数据的类型是 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>。 与 2.x 场景的最大区别是在 Python 3.0 中任何混用文本和数据的尝试都将引发 <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>，而当你在 Python 2.x 中混用 Unicode 和 8 位字符串时，如果 8 位字符串恰好仅包含 7 位 (ASCII) 字节数据那就没有问题，但是如果包含非 ASCII 值则将引发 <a class="reference internal" href="../library/exceptions.html#UnicodeDecodeError" title="UnicodeDecodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code></a>。 这种依赖于特定值的行为多年来造成了无数的苦恼。</p></li>
<li><p class="translated">作为此项设计哲学方面的修改造成的影响，几乎所有使用 Unicode、编码格式或二进制数据的代码都很有可能必须被修改。 这项改变是有益的，因为在 2.x 世界中存在着无数涉及混用已编码和未编码文本的程序缺陷。 要在 Python 2.x 中做好准备，请使用 <code class="xref py py-class docutils literal notranslate"><span class="pre">unicode</span></code> 表示所有未编码文本，只对二进制或已编码数据使用 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>。 这样 <code class="docutils literal notranslate"><span class="pre">2to3</span></code> 工具将为你完成大部分工作。</p></li>
<li><p class="translated">你不能再使用 <code class="docutils literal notranslate"><span class="pre">u&quot;...&quot;</span></code> 字面值来表示 Unicode 文本。 不过，你必须使用 <code class="docutils literal notranslate"><span class="pre">b&quot;...&quot;</span></code> 字面值来表示二进制数据。</p></li>
<li><p class="translated">由于 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 和 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型无法混用，你必须始终在它们之间执行显式转换。 使用 <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.encode()</span></code></a> 将 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 转为 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>，并使用 <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a> 将 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 转为 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>。 你也可以分别使用 <code class="docutils literal notranslate"><span class="pre">bytes(s,</span> <span class="pre">encoding=...)</span></code> 和 <code class="docutils literal notranslate"><span class="pre">str(b,</span> <span class="pre">encoding=...)</span></code>。</p></li>
<li><p class="translated">与 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 一样，<a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型是不可变的。 还有一个单独的 <em>可变</em> 类型用于保存带缓冲的二进制数据，即 <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>。 几乎所有接受 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 的 API 也都接受 <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>。 这个可变 API 是基于 <a class="reference internal" href="../library/collections.abc.html#collections.abc.MutableSequence" title="collections.abc.MutableSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.MutableSequence</span></code></a>。</p></li>
<li><p class="translated">原始字符串字面中的所有反斜线均按字面解释。 这意味着原始字符串中的 <code class="docutils literal notranslate"><span class="pre">'\U'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'\u'</span></code> 转义符不会被特殊处理。 例如，在 Python 3.0 中，<code class="docutils literal notranslate"><span class="pre">r'\u20ac'</span></code> 是一个包含 6 个字符的字符串，而在 2.6 中，<code class="docutils literal notranslate"><span class="pre">ur'\u20ac'</span></code> 是一个 “欧元” 字符。 （当然，这种变化只影响原始字符串的字面意义；在 Python 3.0 中，欧元字符是 <code class="docutils literal notranslate"><span class="pre">'\u20ac'</span></code>。）</p></li>
<li><p class="translated">内置的 <code class="xref py py-class docutils literal notranslate"><span class="pre">basestring</span></code> 抽象类型已被移除。 请改用 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>。 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 和 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型在功能上没有足够的共通性因此不需要有共享的基类。 <code class="docutils literal notranslate"><span class="pre">2to3</span></code> 工具（见下文）会将所有 <code class="xref py py-class docutils literal notranslate"><span class="pre">basestring</span></code> 都替换为 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>。</p></li>
<li><p class="translated">作为文本文件打开的文件（仍然是 <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 的默认模式）总是会使用一个编码格式在（内存中的）字符串和（磁盘中的）字节串之间建立映射。 二进制文件（将 mode 参数设为 <code class="docutils literal notranslate"><span class="pre">b</span></code> 来打开）在内存中总是会使用数字串。 这意味着如果一个文件是使用不正确的模式或编码格式打开的，I/O 操作很可能会报告失败，而不是静默地产生不正确的数据。 这也意味着即使是 Unix 用户在打开文件时也必须指定正确的模式（文本或二进制）。 存在一个依赖于具体平台的默认编码格式，在类 Unix 平台上可以通过 <code class="docutils literal notranslate"><span class="pre">LANG</span></code> 环境变量来设置（有时也会使用其他一些平台专属的语言区域相关的环境变量）。 在多数情况下，系统默认使用 UTF-8，但并非全都如此；你绝不应该依赖这个默认值。 任何读写超出纯 ASCII 文本范围的内容的应用程序都应该提供重写编码格式的选项。 现在已不再需要使用 <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a> 模块中可感知编码格式的流。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdin</span></code></a>、<a class="reference internal" href="../library/sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> 和 <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> 的初始值现在是仅 Unicode 的文本文件（即它们是 <a class="reference internal" href="../library/io.html#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.TextIOBase</span></code></a> 的实例）。 要使用这些数据流读写字节数据，需要使用它们的 <a class="reference internal" href="../library/io.html#io.TextIOBase.buffer" title="io.TextIOBase.buffer"><code class="xref py py-data docutils literal notranslate"><span class="pre">io.TextIOBase.buffer</span></code></a> 属性。</p></li>
<li><p class="translated">文件名是以（Unicode）字符串的形式传给 API 并返回的。 这可能产生特定平台专属的问题因为在某些平台上文件名强制使用字节串。 （另一方面，在 Windows 上文件名则原生存储为 Unicode。） 为绕过此问题，多数接受文件名的 API（例如 <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 和 <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> 模块中的许多函数）都同时接受 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 对象和字符串，而少数 API 会发出要求 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 返回值的提示。 因而，当参数为 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 的实例时 <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a> 会返回由 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 实例组成的列表，<a class="reference internal" href="../library/os.html#os.getcwdb" title="os.getcwdb"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getcwdb()</span></code></a> 则会将当前工作目录作为 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 实例返回。 请注意当 <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a> 返回字符串的列表时，无法被正确解码的文件名会被忽略而不是引发 <a class="reference internal" href="../library/exceptions.html#UnicodeError" title="UnicodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeError</span></code></a>。</p></li>
<li><p class="translated">当系统提供的字节无法使用默认编码进行解释时，一些系统 API，如 <a class="reference internal" href="../library/os.html#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a> 和 <a class="reference internal" href="../library/sys.html#sys.argv" title="sys.argv"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code></a>，也会出现问题。 最好的办法可能是设置 <code class="docutils literal notranslate"><span class="pre">LANG</span></code> 变量并重新运行程序。</p></li>
<li><p class="translated"><span class="target" id="index-75"></span><a class="pep reference external" href="https://peps.python.org/pep-3138/"><strong>PEP 3138</strong></a>: 字符串的 <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> 将不再转义非 ASCII 字符。 不过，它仍然会转义控制字符和在 Unicode 标准中具有不可打印状态的码位。</p></li>
<li><p class="translated"><span class="target" id="index-76"></span><a class="pep reference external" href="https://peps.python.org/pep-3120/"><strong>PEP 3120</strong></a>：现在默认的源码编码格式是UTF-8。</p></li>
<li><p class="translated"><span class="target" id="index-77"></span><a class="pep reference external" href="https://peps.python.org/pep-3131/"><strong>PEP 3131</strong></a>: 现在允许在标识符中使用非 ASCII 字符（不过，标准库中的异常和注释中的贡献者名字仍然只使用 ASCII 字符）。</p></li>
<li><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">StringIO</span></code> 和 <code class="xref py py-mod docutils literal notranslate"><span class="pre">cStringIO</span></code> 模块已被去除。 作为替代，请导入 <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a> 模块并分别为文本和数据使用 <a class="reference internal" href="../library/io.html#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.StringIO</span></code></a> 或 <a class="reference internal" href="../library/io.html#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BytesIO</span></code></a>。</p></li>
<li><p class="translated">另请参阅 <a class="reference internal" href="../howto/unicode.html#unicode-howto"><span class="std std-ref">Unicode 指南</span></a>，其内容已针对 Python 3.0 进行更新。</p></li>
</ul>
</section>
</section>
<section id="overview-of-syntax-changes">
<h2 class="translated">语法变化概述<a class="headerlink" href="#overview-of-syntax-changes" title="Link to this heading">¶</a></h2>
<p class="translated">本节提供了 Python 3.0 中每个 <em>语法</em> 变化的简要说明。</p>
<section id="new-syntax">
<h3 class="translated">新语法<a class="headerlink" href="#new-syntax" title="Link to this heading">¶</a></h3>
<ul>
<li><p class="translated"><span class="target" id="index-78"></span><a class="pep reference external" href="https://peps.python.org/pep-3107/"><strong>PEP 3107</strong></a>: 函数参数和返回值标注。 这提供了一种标注函数形参和返回值的标准方式。 并没有与这种标注相关联的特殊语法而只是可以使用 <a class="reference internal" href="../reference/datamodel.html#object.__annotations__" title="object.__annotations__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__annotations__</span></code></a> 属性在运行时对它们进行内省。 其目的是鼓励在元类、装饰器和框架中尝试应用标注。</p></li>
<li><p class="translated"><span class="target" id="index-79"></span><a class="pep reference external" href="https://peps.python.org/pep-3102/"><strong>PEP 3102</strong></a>: 仅限关键字参数。在参数列表 <code class="docutils literal notranslate"><span class="pre">*args</span></code> 之后出现的命名参数 <em>必须</em> 在调用中使用关键字语法指定。也可以在参数列表中使用 <code class="docutils literal notranslate"><span class="pre">*</span></code> 来表示不接受长度可变的参数列表，但可以使用只包含关键字的参数。</p></li>
<li><p class="translated">类定义中的基类列表后允许使用关键字参数。  这是用于指定元类的新约定（见下一节），但也可用于其他目的，只要元类支持它。</p></li>
<li><p class="translated"><span class="target" id="index-80"></span><a class="pep reference external" href="https://peps.python.org/pep-3104/"><strong>PEP 3104</strong></a>: <a class="reference internal" href="../reference/simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code></a> 语句。 现在你可以使用 <code class="docutils literal notranslate"><span class="pre">nonlocal</span> <span class="pre">x</span></code> 来允许直接赋值到一个外层（但非全局）作用域。 <code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code> 是新的保留字。</p></li>
<li><p class="translated"><span class="target" id="index-81"></span><a class="pep reference external" href="https://peps.python.org/pep-3132/"><strong>PEP 3132</strong></a>: 扩展可迭代对象解包。 你现在可以编写像 <code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">b,</span> <span class="pre">*rest</span> <span class="pre">=</span> <span class="pre">some_sequence</span></code> 这样的代码。 甚至 <code class="docutils literal notranslate"><span class="pre">*rest,</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">stuff</span></code>。 <code class="docutils literal notranslate"><span class="pre">rest</span></code> 对象将总是为一个（可能为空的）列表；右侧的对象可以是任意可迭代对象。 例如:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p class="translated">这会将 <em>a</em> 设为 <code class="docutils literal notranslate"><span class="pre">0</span></code>，<em>b</em> 设为 <code class="docutils literal notranslate"><span class="pre">4</span></code>，而将 <em>rest</em> 设为 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>。</p>
</li>
<li><p class="translated">新增字典推导式: <code class="docutils literal notranslate"><span class="pre">{k:</span> <span class="pre">v</span> <span class="pre">for</span> <span class="pre">k,</span> <span class="pre">v</span> <span class="pre">in</span> <span class="pre">stuff}</span></code> 的含义与 <code class="docutils literal notranslate"><span class="pre">dict(stuff)</span></code> 相同但是更为灵活。 (对此特性的解释见 <span class="target" id="index-82"></span><a class="pep reference external" href="https://peps.python.org/pep-0274/"><strong>PEP 274</strong></a>。 :-)</p></li>
<li><p class="translated">新增集合字面值，例如 <code class="docutils literal notranslate"><span class="pre">{1,</span> <span class="pre">2}</span></code>。 请注意 <code class="docutils literal notranslate"><span class="pre">{}</span></code> 是空字典；要用 <code class="docutils literal notranslate"><span class="pre">set()</span></code> 表示空集合。 集合推导式也受到支持；例如 <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">for</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">stuff}</span></code> 的含义与 <code class="docutils literal notranslate"><span class="pre">set(stuff)</span></code> 相同但是更为灵活。</p></li>
<li><p class="translated">新增八进制字面值，例如 <code class="docutils literal notranslate"><span class="pre">0o720</span></code> (已存在于 2.6 中)。 旧的八进制字面值 (<code class="docutils literal notranslate"><span class="pre">0720</span></code>) 已不复存在。</p></li>
<li><p class="translated">新增二进制字面值，例如 <code class="docutils literal notranslate"><span class="pre">0b1010</span></code> (已存在于 2.6 中)，还有对应的新增内置函数 <a class="reference internal" href="../library/functions.html#bin" title="bin"><code class="xref py py-func docutils literal notranslate"><span class="pre">bin()</span></code></a>。</p></li>
<li><p class="translated">引入了带有 <code class="docutils literal notranslate"><span class="pre">b</span></code> 或 <code class="docutils literal notranslate"><span class="pre">B</span></code> 前缀的字节串字面值，还有对应的新增内置函数 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">bytes()</span></code></a>。</p></li>
</ul>
</section>
<section id="changed-syntax">
<h3 class="translated">语法变化<a class="headerlink" href="#changed-syntax" title="Link to this heading">¶</a></h3>
<ul>
<li><p class="translated"><span class="target" id="index-83"></span><a class="pep reference external" href="https://peps.python.org/pep-3109/"><strong>PEP 3109</strong></a> 和 <span class="target" id="index-84"></span><a class="pep reference external" href="https://peps.python.org/pep-3134/"><strong>PEP 3134</strong></a>: 新增 <a class="reference internal" href="../reference/simple_stmts.html#raise"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">raise</span></code></a> 语句的语法: <code class="samp docutils literal notranslate"><span class="pre">raise</span> <span class="pre">[</span><em><span class="pre">expr</span></em> <span class="pre">[from</span> <em><span class="pre">expr</span></em><span class="pre">]]</span></code>。 见下文。</p></li>
<li><p class="translated">现在 <code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code> 和 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 是保留关键字。 （实际是从 2.6 开始。）</p></li>
<li><p class="translated"><code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code> 和 <code class="docutils literal notranslate"><span class="pre">None</span></code> 已成为保留关键字。 （2.6 已经对 <code class="docutils literal notranslate"><span class="pre">None</span></code> 部分强制应用限制。）</p></li>
<li><p class="translated">将 <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> <em>exc</em>, <em>var</em> 改为 <code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code> <em>exc</em> <code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code> <em>var</em>。 参见 <span class="target" id="index-85"></span><a class="pep reference external" href="https://peps.python.org/pep-3110/"><strong>PEP 3110</strong></a>。</p></li>
<li><p class="translated"><span class="target" id="index-86"></span><a class="pep reference external" href="https://peps.python.org/pep-3115/"><strong>PEP 3115</strong></a>: 新的元类语法。 替换:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">C</span><span class="p">:</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">M</span>
    <span class="o">...</span>
</pre></div>
</div>
<p class="translated">你现在需要使用:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">C</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">M</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p class="translated">模块级全局变量 <code class="xref py py-data docutils literal notranslate"><span class="pre">__metaclass__</span></code> 已不再受支持。 （它是一个令默认使用新式类而无需从 <a class="reference internal" href="../library/functions.html#object" title="object"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a> 派生每一个类的辅助工具。）</p>
</li>
<li><p class="translated">列表推导式不再支持 <code class="samp docutils literal notranslate"><span class="pre">[...</span> <span class="pre">for</span> <em><span class="pre">var</span></em> <span class="pre">in</span> <em><span class="pre">item1</span></em><span class="pre">,</span> <em><span class="pre">item2</span></em><span class="pre">,</span> <span class="pre">...]</span></code> 这样的语法形式。 请改用 <code class="samp docutils literal notranslate"><span class="pre">[...</span> <span class="pre">for</span> <em><span class="pre">var</span></em> <span class="pre">in</span> <span class="pre">(</span><em><span class="pre">item1</span></em><span class="pre">,</span> <em><span class="pre">item2</span></em><span class="pre">,</span> <span class="pre">...)]</span></code>。 还要注意列表推导式具有不同的句法：它们更像是 <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal notranslate"><span class="pre">list()</span></code></a> 构造器内部用于生成器表达式的语法糖，具体来说就是循环控制变量将不会再泄漏到外层作用域中。</p></li>
<li><p class="translated"><em>ellipsis</em> (<code class="docutils literal notranslate"><span class="pre">...</span></code>) 可以在任何地方作为原子表达式使用。（以前只允许在片段中使用。）另外，现在 <em>必须</em> 拼写为 <code class="docutils literal notranslate"><span class="pre">...</span></code>。（以前也可以拼写为 <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">.</span> <span class="pre">.</span></code>，这只是一个偶然的语法。）</p></li>
</ul>
</section>
<section id="removed-syntax">
<h3 class="translated">移除的语法<a class="headerlink" href="#removed-syntax" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p class="translated"><span class="target" id="index-87"></span><a class="pep reference external" href="https://peps.python.org/pep-3113/"><strong>PEP 3113</strong></a>: 元组形参解包已被移除。 你不能再使用 <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">foo(a,</span> <span class="pre">(b,</span> <span class="pre">c)):</span> <span class="pre">...</span></code> 的写法。 请改用 <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">foo(a,</span> <span class="pre">b_c):</span> <span class="pre">b,</span> <span class="pre">c</span> <span class="pre">=</span> <span class="pre">b_c</span></code>。</p></li>
<li><p class="translated">移除了反引号 (请改用 <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a>)。</p></li>
<li><p class="translated">移除了 <code class="docutils literal notranslate"><span class="pre">&lt;&gt;</span></code> (请改用 <code class="docutils literal notranslate"><span class="pre">!=</span></code>)。</p></li>
<li><p class="translated">移除的关键字: <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> 不再是一个关键字；它仍是一个函数。 （幸运的是该函数语法也在 2.x 中被接受。） 还要注意 <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> 将不再接受流作为参数；你可以将原来的 <code class="docutils literal notranslate"><span class="pre">exec(f)</span></code> 改为使用 <code class="docutils literal notranslate"><span class="pre">exec(f.read())</span></code>。</p></li>
<li><p class="translated">整数字面值不再支持 <code class="docutils literal notranslate"><span class="pre">l</span></code> 或 <code class="docutils literal notranslate"><span class="pre">L</span></code> 后缀。</p></li>
<li><p class="translated">字符串字面值不再支持 <code class="docutils literal notranslate"><span class="pre">u</span></code> 或 <code class="docutils literal notranslate"><span class="pre">U</span></code> 前缀。</p></li>
<li><p class="translated"><a class="reference internal" href="../reference/simple_stmts.html#from"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">from</span></code></a> <em>module</em> <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a> <code class="docutils literal notranslate"><span class="pre">*</span></code> 语法仅允许在模块层级使用，不再允许出现于函数内部。</p></li>
<li><p class="translated">唯一可接受的相对导入语法为 <code class="samp docutils literal notranslate"><span class="pre">from</span> <span class="pre">.[</span><em><span class="pre">module</span></em><span class="pre">]</span> <span class="pre">import</span> <em><span class="pre">name</span></em></code>。 所有不以 <code class="docutils literal notranslate"><span class="pre">.</span></code> 开头的 <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a> 形式都将被解读为绝对导入。 (<span class="target" id="index-88"></span><a class="pep reference external" href="https://peps.python.org/pep-0328/"><strong>PEP 328</strong></a>)</p></li>
<li><p class="translated">经典类已不复存在。</p></li>
</ul>
</section>
</section>
<section id="changes-already-present-in-python-2-6">
<h2 class="translated">已存在于 Python 2.6 中的改变<a class="headerlink" href="#changes-already-present-in-python-2-6" title="Link to this heading">¶</a></h2>
<p class="translated">由于许多用户可能会直接从 Python 2.5 跳到 Python 3.0，因此本节提醒读者注意最初为 Python 3.0 设计但后来移植到 Python 2.6 的新特性。 如需更详细的说明请参阅 <a class="reference internal" href="2.6.html#whats-new-in-2-6"><span class="std std-ref">Python 2.6 有什么新变化</span></a> 中的相应章节。</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-0343"><span class="std std-ref">PEP 343: &quot;with&quot; 语句</span></a>。 现在 <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> 语句已是一个标准特性而不再需要从 <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__future__</span></code></a> 导入。 另请参阅 <a class="reference internal" href="2.6.html#new-26-context-managers"><span class="std std-ref">编写上下文管理器</span></a> 和 <a class="reference internal" href="2.6.html#new-module-contextlib"><span class="std std-ref">contextlib 模块</span></a>。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-0366"><span class="std std-ref">PEP 366: 从主模块显式相对导入</span></a>。 这增强了 <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a> 选项在被引用的模块位于包中时的实用性。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-0370"><span class="std std-ref">PEP 370: 分用户的 site-packages 目录</span></a>.</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-0371"><span class="std std-ref">PEP 371: multiprocessing (多进程)包</span></a>.</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3101"><span class="std std-ref">PEP 3101: 高级字符串格式</span></a>。 注意：2.6 说明文档提到 <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">format()</span></code></a> 方法同时适用于 8 位和 Unicode 字符串。 在 3.0 中，只有 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> 类型（带有 Unicode 支持的文本字符串）才支持此方法；<a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型并不支持。 最终的计划是使其成为仅针对字符串格式化的 API，并在 Python 3.1 中开始弃用 <code class="docutils literal notranslate"><span class="pre">%</span></code> 字符串运算符。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3105"><span class="std std-ref">PEP 3105: print 改为函数</span></a>。 现在这已是一个标准特性而不再需要从 <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__future__</span></code></a> 导入。 更多详情见上文。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3110"><span class="std std-ref">PEP 3110: 异常处理的变更</span></a>。 现在 <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> <em>exc</em> <code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code> <em>var</em> 语法已成为标准而 <code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code> <em>exc</em>, <em>var</em> 不再受到支持。 （当然，<code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code> <em>var</em> 部分仍为可选项。）</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3112"><span class="std std-ref">PEP 3112: 字节字面值</span></a>。 现在 <code class="docutils literal notranslate"><span class="pre">b&quot;...&quot;</span></code> 字节串字面值标记法（及其变化形式如 <code class="docutils literal notranslate"><span class="pre">b'...'</span></code>, <code class="docutils literal notranslate"><span class="pre">b&quot;&quot;&quot;...&quot;&quot;&quot;</span></code> 和 <code class="docutils literal notranslate"><span class="pre">br&quot;...&quot;</span></code> 等将产生 <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> 类型的字面值。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3116"><span class="std std-ref">PEP 3116: 新 I/O 库</span></a>。 <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a> 模块现在是执行文件 I/O 的标准方式。 内置的 <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> 函数现在是 <a class="reference internal" href="../library/io.html#io.open" title="io.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">io.open()</span></code></a> 的别名并增加了额外的关键字参数 <em>encoding</em>, <em>errors</em>, <em>newline</em> 和 <em>closefd</em>。 还请注意无效的 <em>mode</em> 参数现在会引发 <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>，而不是 <a class="reference internal" href="../library/exceptions.html#IOError" title="IOError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IOError</span></code></a>。 在文本文件对象之下的二进制文件对象可作为 <code class="xref py py-attr docutils literal notranslate"><span class="pre">f.buffer</span></code> 来访问（但要记住文本对象会为自己保留一个缓冲区以加快编码和解码操作的速度）。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3118"><span class="std std-ref">PEP 3118: 修改缓冲区协议</span></a>。 旧的内置 <code class="xref py py-func docutils literal notranslate"><span class="pre">buffer()</span></code> 现已完全不复存在；新的内置 <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-func docutils literal notranslate"><span class="pre">memoryview()</span></code></a> 提供了（基本）类似的功能。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3119"><span class="std std-ref">PEP 3119: 抽象基类</span></a>。 现在 <a class="reference internal" href="../library/abc.html#module-abc" title="abc: Abstract base classes according to :pep:`3119`."><code class="xref py py-mod docutils literal notranslate"><span class="pre">abc</span></code></a> 模块以及在 <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> 模块中定义的 ABC 在本语言中扮演了更为重要的角色，而内置的多项集类型如 <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> 和 <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> 分别与 <a class="reference internal" href="../library/collections.abc.html#collections.abc.MutableMapping" title="collections.abc.MutableMapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.MutableMapping</span></code></a> 和 <a class="reference internal" href="../library/collections.abc.html#collections.abc.MutableSequence" title="collections.abc.MutableSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.MutableSequence</span></code></a> ABC 保持对应。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3127"><span class="std std-ref">PEP 3127: 整型文字支持和语法</span></a>。 如上文所述，新的八进制字面值标记法是唯一受支持的形式，并增加了二进制字面值。</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3129"><span class="std std-ref">PEP 3129: 类装饰器</span></a>.</p></li>
<li><p class="translated"><a class="reference internal" href="2.6.html#pep-3141"><span class="std std-ref">PEP 3141: 数字的类型层级结构</span></a>。 <a class="reference internal" href="../library/numbers.html#module-numbers" title="numbers: Numeric abstract base classes (Complex, Real, Integral, etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">numbers</span></code></a> 模块是 ABC 的另一个新用例，它定义了 Python 的“数字层级塔”。 另请注意新的 <a class="reference internal" href="../library/fractions.html#module-fractions" title="fractions: Rational numbers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">fractions</span></code></a> 模块，它实现了 <a class="reference internal" href="../library/numbers.html#numbers.Rational" title="numbers.Rational"><code class="xref py py-class docutils literal notranslate"><span class="pre">numbers.Rational</span></code></a>。</p></li>
</ul>
</section>
<section id="library-changes">
<h2 class="translated">库的修改<a class="headerlink" href="#library-changes" title="Link to this heading">¶</a></h2>
<p class="translated">由于时间有限，本文档并未完全覆盖标准库的所有变化内容。 <span class="target" id="index-89"></span><a class="pep reference external" href="https://peps.python.org/pep-3108/"><strong>PEP 3108</strong></a> 引用了对标准库的主要修改。 以下是精简版的预览：</p>
<ul>
<li><p class="translated">许多旧模块已被移除。 其中一些，如 <code class="xref py py-mod docutils literal notranslate"><span class="pre">gopherlib</span></code> (不再有用) 和 <code class="xref py py-mod docutils literal notranslate"><span class="pre">md5</span></code> (被 <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> 替代)，已根据 <span class="target" id="index-90"></span><a class="pep reference external" href="https://peps.python.org/pep-0004/"><strong>PEP 4</strong></a> 被弃用。 其他一些是作为移除对几种平台如 Irix, BeOS 和 Mac OS 9 支持的结果而被移除的 (参见 <span class="target" id="index-91"></span><a class="pep reference external" href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a>)。 某些模块则由于缺少使用或因为存在更好的替代而被选入 Python 3.0 的移除计划。 完整列表参见 <span class="target" id="index-92"></span><a class="pep reference external" href="https://peps.python.org/pep-3108/"><strong>PEP 3108</strong></a>。</p></li>
<li><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bsddb3</span></code> 软件包被移除是因为随着时间的推移它存在于核心标准库已被证明由于测试的不稳定性和 Berkeley DB 的发布计划是对核心开发者的重大负担。 不过，这个软件包仍在 <a class="reference external" href="https://www.jcea.es/programacion/pybsddb.htm">https://www.jcea.es/programacion/pybsddb.htm</a> 获得外部维护并继续存活。</p></li>
<li><p class="translated">一些模块名称已被修改因为它们的旧名称不符合 <span class="target" id="index-93"></span><a class="pep reference external" href="https://peps.python.org/pep-0008/"><strong>PEP 8</strong></a>，或是出于各种其他理由。 具体列表如下：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p class="translated">旧名称</p></th>
<th class="head"><p class="translated">新名称</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p class="translated">_winreg</p></td>
<td><p class="translated">winreg</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">ConfigParser</p></td>
<td><p class="translated">configparser</p></td>
</tr>
<tr class="row-even"><td><p class="translated">copy_reg</p></td>
<td><p class="translated">copyreg</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">Queue</p></td>
<td><p class="translated">queue</p></td>
</tr>
<tr class="row-even"><td><p class="translated">SocketServer</p></td>
<td><p class="translated">socketserver</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">markupbase</p></td>
<td><p class="translated">_markupbase</p></td>
</tr>
<tr class="row-even"><td><p class="translated">repr</p></td>
<td><p class="translated">reprlib</p></td>
</tr>
<tr class="row-odd"><td><p class="translated">test.test_support</p></td>
<td><p class="translated">test.support</p></td>
</tr>
</tbody>
</table>
</li>
<li><p class="translated">在 Python 2.x 中的常见模式是某个模块有一个以纯 Python 实现的版本，并有一个作为 C 扩展实现的加速版本；例如，<a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> 和 <code class="xref py py-mod docutils literal notranslate"><span class="pre">cPickle</span></code>。 这造成每个此类模块的用户存在导入加速版本并在必要时回退到纯 Python 版本的负担。 在 Python 3.0 中，加速版本将被视为纯 Python 版本的实现细节。 用户应当总是导入标准版本，该版本会尝试导入加速版本并在必要时回退到纯 Python 版本。 <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> / <code class="xref py py-mod docutils literal notranslate"><span class="pre">cPickle</span></code> 对就获得了这样的处置。 <a class="reference internal" href="../library/profile.html#module-profile" title="profile: Python source profiler."><code class="xref py py-mod docutils literal notranslate"><span class="pre">profile</span></code></a> 模块被加入了 3.1 版的处置计划。 <code class="xref py py-mod docutils literal notranslate"><span class="pre">StringIO</span></code> 模块已被转为 <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a> 模块中的一个类。</p></li>
<li><p class="translated">一些有关联的模块已被组织为包，通常其子模块名也得到了简化。 这样产生的新包有：</p>
<ul class="simple">
<li><p class="translated"><a class="reference internal" href="../library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &quot;database&quot; formats."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm</span></code></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">anydbm</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">dbhash</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">dumbdbm</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">gdbm</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">whichdb</span></code>)。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/html.html#module-html" title="html: Helpers for manipulating HTML."><code class="xref py py-mod docutils literal notranslate"><span class="pre">html</span></code></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">HTMLParser</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">htmlentitydefs</span></code>)。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/http.html#module-http" title="http: HTTP status codes and messages"><code class="xref py py-mod docutils literal notranslate"><span class="pre">http</span></code></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">httplib</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">BaseHTTPServer</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">CGIHTTPServer</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">SimpleHTTPServer</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cookie</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">cookielib</span></code>)。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a> (所有 <code class="docutils literal notranslate"><span class="pre">Tkinter</span></code> 相关的模块但 <a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal notranslate"><span class="pre">turtle</span></code></a> 除外)。 <a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal notranslate"><span class="pre">turtle</span></code></a> 的目标用户通常并不真的关心 <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tkinter</span></code></a>。 还要注意在 Python 2.6 中，<a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal notranslate"><span class="pre">turtle</span></code></a> 的功能得到了大幅增强。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/urllib.html#module-urllib" title="urllib"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib</span></code></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib2</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">urlparse</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">robotparse</span></code>)。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/xmlrpc.html#module-xmlrpc" title="xmlrpc: Server and client modules implementing XML-RPC."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpc</span></code></a> (<code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpclib</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">DocXMLRPCServer</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">SimpleXMLRPCServer</span></code>)。</p></li>
</ul>
</li>
</ul>
<p class="translated">其他一些针对标准库模块的改变，未被 <span class="target" id="index-94"></span><a class="pep reference external" href="https://peps.python.org/pep-3108/"><strong>PEP 3108</strong></a> 覆盖：</p>
<ul class="simple">
<li><p class="translated">去除了 <code class="xref py py-mod docutils literal notranslate"><span class="pre">sets</span></code>。 请改用内置 <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a> 类。</p></li>
<li><p class="translated">清理了 <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> 模块：移除 <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exitfunc()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_clear()</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.exc_type</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.exc_value</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.exc_traceback</span></code>。 （请注意 <a class="reference internal" href="../library/sys.html#sys.last_type" title="sys.last_type"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.last_type</span></code></a> 等仍然保留。）</p></li>
<li><p class="translated">清理了 <a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array.array</span></code></a> 类型：去除 <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> 方法；改用 <a class="reference internal" href="../library/array.html#array.array.fromfile" title="array.array.fromfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fromfile()</span></code></a> 和 <a class="reference internal" href="../library/array.html#array.array.tofile" title="array.array.tofile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tofile()</span></code></a>。 此外，数组的 <code class="docutils literal notranslate"><span class="pre">'c'</span></code> 类型代码已去除 -- 请使用 <code class="docutils literal notranslate"><span class="pre">'b'</span></code> 表示字节数据或使用 <code class="docutils literal notranslate"><span class="pre">'u'</span></code> 表示 Unicode 字符。</p></li>
<li><p class="translated">清理了 <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a> 模块：移除 <code class="xref py py-func docutils literal notranslate"><span class="pre">sequenceIncludes()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">isCallable()</span></code>。</p></li>
<li><p class="translated">清理了 <code class="xref py py-mod docutils literal notranslate"><span class="pre">thread</span></code> 模块：去除 <code class="xref py py-func docutils literal notranslate"><span class="pre">acquire_lock()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">release_lock()</span></code>；改用 <a class="reference internal" href="../library/threading.html#threading.Lock.acquire" title="threading.Lock.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">acquire()</span></code></a> 和 <a class="reference internal" href="../library/threading.html#threading.Lock.release" title="threading.Lock.release"><code class="xref py py-meth docutils literal notranslate"><span class="pre">release()</span></code></a>。</p></li>
<li><p class="translated">清理了 <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> 模块：移除 <code class="xref py py-func docutils literal notranslate"><span class="pre">jumpahead()</span></code> API。</p></li>
<li><p class="translated"><code class="xref py py-mod docutils literal notranslate"><span class="pre">new</span></code> 模块已不复存在。</p></li>
<li><p class="translated"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.tmpnam()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">os.tempnam()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">os.tmpfile()</span></code> 等函数已被移除并应改用 <a class="reference internal" href="../library/tempfile.html#module-tempfile" title="tempfile: Generate temporary files and directories."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tempfile</span></code></a> 模块。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/tokenize.html#module-tokenize" title="tokenize: Lexical scanner for Python source code."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tokenize</span></code></a> 模块已被修改以适用于字节串。 主入口点现在是 <a class="reference internal" href="../library/tokenize.html#tokenize.tokenize" title="tokenize.tokenize"><code class="xref py py-func docutils literal notranslate"><span class="pre">tokenize.tokenize()</span></code></a>，而不是 generate_tokens。</p></li>
<li><p class="translated"><code class="xref py py-data docutils literal notranslate"><span class="pre">string.letters</span></code> 及其同类 (<code class="xref py py-data docutils literal notranslate"><span class="pre">string.lowercase</span></code> 和 <code class="xref py py-data docutils literal notranslate"><span class="pre">string.uppercase</span></code>) 已不复存在。 请改用 <a class="reference internal" href="../library/string.html#string.ascii_letters" title="string.ascii_letters"><code class="xref py py-data docutils literal notranslate"><span class="pre">string.ascii_letters</span></code></a> 等。 （移除 <code class="xref py py-data docutils literal notranslate"><span class="pre">string.letters</span></code> 及其同类的原因在于它们具有语言区域专属的行为，对于这些被称为全局“常量”的对象来说不是好主意。）</p></li>
<li><p class="translated">模块 <code class="xref py py-mod docutils literal notranslate"><span class="pre">__builtin__</span></code> 被重命名为 <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code></a> (移除了下划线，添加了 's')。 大多数全局命名空间中的 <code class="xref py py-data docutils literal notranslate"><span class="pre">__builtins__</span></code> 变量保持不变。 要修改内置对象，你应当使用 <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code></a>，而不是 <code class="xref py py-data docutils literal notranslate"><span class="pre">__builtins__</span></code>!</p></li>
</ul>
</section>
<section id="pep-3101-a-new-approach-to-string-formatting">
<h2 class="translated"><span class="target" id="index-59"></span><a class="pep reference external" href="https://peps.python.org/pep-3101/"><strong>PEP 3101</strong></a>: 字符串格式化的新方式<a class="headerlink" href="#pep-3101-a-new-approach-to-string-formatting" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p class="translated">一种针对内置字符串格式化操作的新系统替代了 <code class="docutils literal notranslate"><span class="pre">%</span></code> 字符串格式化运算符。 （不过，<code class="docutils literal notranslate"><span class="pre">%</span></code>  运算符仍然受到支持；它将在 Python 3.1 中被弃用并在今后某一时刻从语言特性中移除。） 请参阅 <span class="target" id="index-95"></span><a class="pep reference external" href="https://peps.python.org/pep-3101/"><strong>PEP 3101</strong></a> 了解详情。</p></li>
</ul>
</section>
<section id="changes-to-exceptions">
<h2 class="translated">对异常的修改<a class="headerlink" href="#changes-to-exceptions" title="Link to this heading">¶</a></h2>
<p class="translated">用于引发和捕获异常的 API 已经过清理并增加了强大的新特性：</p>
<ul>
<li><p class="translated"><span class="target" id="index-96"></span><a class="pep reference external" href="https://peps.python.org/pep-0352/"><strong>PEP 352</strong></a>: 所有异常都必须（直接或间接地）派生自 <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseException</span></code></a>。 这是异常层级结构的根对象。 作为推荐方式这并不是新的变化，但 <em>必须</em> 从 <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseException</span></code></a> 继承是新的变化。 （Python 2.6 仍然允许引发经典类，并且不限制你能捕获的异常。） 作为此变化的结果，字符串异常终于真正彻底地死亡了。</p></li>
<li><p class="translated">几乎所有异常实际上都应当派生自 <a class="reference internal" href="../library/exceptions.html#Exception" title="Exception"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code></a>；<a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BaseException</span></code></a> 仅应当被用作那些仅应当在最高层级中处理的异常的基类，如 <a class="reference internal" href="../library/exceptions.html#SystemExit" title="SystemExit"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SystemExit</span></code></a> 或 <a class="reference internal" href="../library/exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a>。 处理除了后面这一类之外的所有异常的推荐写法是使用 <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> <a class="reference internal" href="../library/exceptions.html#Exception" title="Exception"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code></a>。</p></li>
<li><p class="translated"><code class="xref py py-exc docutils literal notranslate"><span class="pre">StandardError</span></code> 已被移除。</p></li>
<li><p class="translated">异常已不再被当作序列来处理。 而应改用 <a class="reference internal" href="../library/exceptions.html#BaseException.args" title="BaseException.args"><code class="xref py py-attr docutils literal notranslate"><span class="pre">args</span></code></a> 属性。</p></li>
<li><p class="translated"><span class="target" id="index-97"></span><a class="pep reference external" href="https://peps.python.org/pep-3109/"><strong>PEP 3109</strong></a>: 引发异常。 你现在必须使用 <code class="samp docutils literal notranslate"><span class="pre">raise</span> <em><span class="pre">Exception</span></em><span class="pre">(</span><em><span class="pre">args</span></em><span class="pre">)</span></code> 而不是 <code class="samp docutils literal notranslate"><span class="pre">raise</span> <em><span class="pre">Exception</span></em><span class="pre">,</span> <em><span class="pre">args</span></em></code>。 此外，你不再可以显式地指定回溯；作为替代，如果你 <em>必须</em> 这样做，你可以直接赋值给 <a class="reference internal" href="../library/exceptions.html#BaseException.__traceback__" title="BaseException.__traceback__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__traceback__</span></code></a> 属性（见下文）。</p></li>
<li><p class="translated"><span class="target" id="index-98"></span><a class="pep reference external" href="https://peps.python.org/pep-3110/"><strong>PEP 3110</strong></a>: 捕获异常。 你现在必须使用 <code class="samp docutils literal notranslate"><span class="pre">except</span> <em><span class="pre">SomeException</span></em> <span class="pre">as</span> <em><span class="pre">variable</span></em></code> 而不是 <code class="samp docutils literal notranslate"><span class="pre">except</span> <em><span class="pre">SomeException</span></em><span class="pre">,</span> <em><span class="pre">variable</span></em></code>。 此外，<em>variable</em> 会在离开 <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> 代码块时被显式地删除。</p></li>
<li><p class="translated"><span class="target" id="index-99"></span><a class="pep reference external" href="https://peps.python.org/pep-3134/"><strong>PEP 3134</strong></a>: 异常串连。 存在两种情况：隐式串连和显式串连。 当异常在 <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> 或 <a class="reference internal" href="../reference/compound_stmts.html#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> 处理器代码块中被引发时将发生隐式串连。 通常发生这种情况是由于处理器代码块中存在程序缺陷；我们将其称为 <em>二级</em> 异常。 在这种情况下，（正在处理的）原始异常将被保存为该二级异常的 <a class="reference internal" href="../library/exceptions.html#BaseException.__context__" title="BaseException.__context__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__context__</span></code></a> 属性。 显式串连则是由以下语法来唤起:</p>
<div class="translated highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">raise</span> <span class="n">SecondaryException</span><span class="p">()</span> <span class="kn">from</span><span class="w"> </span><span class="nn">primary_exception</span>
</pre></div>
</div>
<p class="translated">（这里 <em>primary_exception</em> 是产生一个异常对象的任何异常，它可能是在之前被捕获的异常）。 在这种情况下，该原始异常将存储在二级异常的 <a class="reference internal" href="../library/exceptions.html#BaseException.__cause__" title="BaseException.__cause__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__cause__</span></code></a> 属性中。 如果遍历 <code class="xref py py-attr docutils literal notranslate"><span class="pre">__cause__</span></code> 和 <a class="reference internal" href="../library/exceptions.html#BaseException.__context__" title="BaseException.__context__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__context__</span></code></a> 属性链时发生了未被处理的异常则会打印回溯信息并为属性链中的每个部分打印单独的回溯信息，原始异常将位于最上面。 （Java 用户可能很了解这样的行为。）</p>
</li>
<li><p class="translated"><span class="target" id="index-100"></span><a class="pep reference external" href="https://peps.python.org/pep-3134/"><strong>PEP 3134</strong></a>: 异常对象现在会将其回溯信息保存为 <a class="reference internal" href="../library/exceptions.html#BaseException.__traceback__" title="BaseException.__traceback__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__traceback__</span></code></a> 属性。 这意味着一个异常对象现在将包含从属于异常的所有信息，没有什么理由再使用 <a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a> (不过后者并未被移除)。</p></li>
<li><p class="translated">一些提示 Windows 载入扩展模块失败的异常消息得到了改进。 例如，<code class="docutils literal notranslate"><span class="pre">error</span> <span class="pre">code</span> <span class="pre">193</span></code> 现在是 <code class="docutils literal notranslate"><span class="pre">%1</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">Win32</span> <span class="pre">application</span></code>。 字符串现在可处理非英语的语言区域。</p></li>
</ul>
</section>
<section id="miscellaneous-other-changes">
<h2 class="translated">其他杂项修改<a class="headerlink" href="#miscellaneous-other-changes" title="Link to this heading">¶</a></h2>
<section id="operators-and-special-methods">
<h3 class="translated">运算符与特殊方法<a class="headerlink" href="#operators-and-special-methods" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p class="translated">现在 <code class="docutils literal notranslate"><span class="pre">!=</span></code> 将返回与 <code class="docutils literal notranslate"><span class="pre">==</span></code> 相反的结果，除非 <code class="docutils literal notranslate"><span class="pre">==</span></code> 是返回 <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a>。</p></li>
<li><p class="translated">“未绑定方法”的概念已从语言中移除。 现在当把一个方法作为类属性来引用时，你将得到一个普通函数对象。</p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__getslice__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">__setslice__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">__delslice__()</span></code> 已被去除。 现在 <code class="docutils literal notranslate"><span class="pre">a[i:j]</span></code> 语法形式将被转为 <code class="docutils literal notranslate"><span class="pre">a.__getitem__(slice(i,</span> <span class="pre">j))</span></code> (或者当用作赋值或删除的目标时，分别被转为 <a class="reference internal" href="../reference/datamodel.html#object.__setitem__" title="object.__setitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__setitem__()</span></code></a> 或 <a class="reference internal" href="../reference/datamodel.html#object.__delitem__" title="object.__delitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__delitem__()</span></code></a>)。</p></li>
<li><p class="translated"><span class="target" id="index-101"></span><a class="pep reference external" href="https://peps.python.org/pep-3114/"><strong>PEP 3114</strong></a>: 标准的 <a class="reference internal" href="../library/functions.html#next" title="next"><code class="xref py py-meth docutils literal notranslate"><span class="pre">next()</span></code></a> 方法已被重命名为 <a class="reference internal" href="../library/stdtypes.html#iterator.__next__" title="iterator.__next__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__next__()</span></code></a>。</p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__oct__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">__hex__()</span></code> 特殊方法已被移除 -- 现在 <a class="reference internal" href="../library/functions.html#oct" title="oct"><code class="xref py py-func docutils literal notranslate"><span class="pre">oct()</span></code></a> 和 <a class="reference internal" href="../library/functions.html#hex" title="hex"><code class="xref py py-func docutils literal notranslate"><span class="pre">hex()</span></code></a> 将使用 <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code></a> 来将参数转换为整数。</p></li>
<li><p class="translated">移除了对 <code class="xref py py-attr docutils literal notranslate"><span class="pre">__members__</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">__methods__</span></code> 的支持。</p></li>
<li><p class="translated">名为 <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_X</span></code> 的函数属性已被重命名为使用 <code class="xref py py-attr docutils literal notranslate"><span class="pre">__X__</span></code> 的形式，在函数属性命名空间中释放这些名称以便作为用户自定义属性。 也就是说，<code class="xref py py-attr docutils literal notranslate"><span class="pre">func_closure</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_code</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_defaults</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_dict</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_doc</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_globals</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_name</span></code> 分别被重命名为 <a class="reference internal" href="../reference/datamodel.html#function.__closure__" title="function.__closure__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__closure__</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#function.__code__" title="function.__code__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__code__</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#function.__defaults__" title="function.__defaults__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__defaults__</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#function.__dict__" title="function.__dict__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__dict__</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#function.__doc__" title="function.__doc__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__doc__</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#function.__globals__" title="function.__globals__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__globals__</span></code></a>, <a class="reference internal" href="../reference/datamodel.html#function.__name__" title="function.__name__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__name__</span></code></a>。</p></li>
<li><p class="translated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__nonzero__()</span></code> 现在为 <a class="reference internal" href="../reference/datamodel.html#object.__bool__" title="object.__bool__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bool__()</span></code></a>。</p></li>
</ul>
</section>
<section id="builtins">
<h3 class="translated">内置对象<a class="headerlink" href="#builtins" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p class="translated"><span class="target" id="index-102"></span><a class="pep reference external" href="https://peps.python.org/pep-3135/"><strong>PEP 3135</strong></a>: 新的 <a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>。 现在你可以不带参数地唤起 <a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> 这样（假定这发生在定义于 <a class="reference internal" href="../reference/compound_stmts.html#class"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">class</span></code></a> 语句内部的常规实例方法中）将会自动选择正确的类和实例。 附带参数时，<a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> 的行为保持不变。</p></li>
<li><p class="translated"><span class="target" id="index-103"></span><a class="pep reference external" href="https://peps.python.org/pep-3111/"><strong>PEP 3111</strong></a>: <code class="xref py py-func docutils literal notranslate"><span class="pre">raw_input()</span></code> 已改名为 <a class="reference internal" href="../library/functions.html#input" title="input"><code class="xref py py-func docutils literal notranslate"><span class="pre">input()</span></code></a>。 也就是说，新的 <a class="reference internal" href="../library/functions.html#input" title="input"><code class="xref py py-func docutils literal notranslate"><span class="pre">input()</span></code></a> 函数会从 <a class="reference internal" href="../library/sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdin</span></code></a> 读取一行并去除末尾换行符再将其返回。 如果输入提前终结则会引发 <a class="reference internal" href="../library/exceptions.html#EOFError" title="EOFError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">EOFError</span></code></a>。 要获取原来 <a class="reference internal" href="../library/functions.html#input" title="input"><code class="xref py py-func docutils literal notranslate"><span class="pre">input()</span></code></a> 的行为，请使用 <code class="docutils literal notranslate"><span class="pre">eval(input())</span></code>。</p></li>
<li><p class="translated">新增内置函数 <a class="reference internal" href="../library/functions.html#next" title="next"><code class="xref py py-func docutils literal notranslate"><span class="pre">next()</span></code></a> 用于在对象上调用 <a class="reference internal" href="../library/stdtypes.html#iterator.__next__" title="iterator.__next__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__next__()</span></code></a> 方法。</p></li>
<li><p class="translated"><a class="reference internal" href="../library/functions.html#round" title="round"><code class="xref py py-func docutils literal notranslate"><span class="pre">round()</span></code></a> 函数的舍入策略和返回类型已有改变。 对于两边差值相同的情况现在将会舍入到最接近的偶数结果而不是远离零值的结果。 （例如，<code class="docutils literal notranslate"><span class="pre">round(2.5)</span></code> 现在将返回 <code class="docutils literal notranslate"><span class="pre">2</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">3</span></code>。） 现在 <code class="docutils literal notranslate"><span class="pre">round(x[,</span> <span class="pre">n])</span></code> 将委托给 <code class="docutils literal notranslate"><span class="pre">x.__round__([n])</span></code> 而不是始终返回一个浮点数。 它通常会在附带一个参数调用时返回整数而在附带两个参数调用时返回与 <code class="docutils literal notranslate"><span class="pre">x</span></code> 相同类型的值。</p></li>
<li><p class="translated">将 <code class="xref py py-func docutils literal notranslate"><span class="pre">intern()</span></code> 移至 <a class="reference internal" href="../library/sys.html#sys.intern" title="sys.intern"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.intern()</span></code></a>。</p></li>
<li><p class="translated">移除: <code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code>。 原 <code class="docutils literal notranslate"><span class="pre">apply(f,</span> <span class="pre">args)</span></code> 请改用 <code class="docutils literal notranslate"><span class="pre">f(*args)</span></code>。</p></li>
<li><p class="translated">移除了 <a class="reference internal" href="../library/functions.html#callable" title="callable"><code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code></a>。 原 <code class="docutils literal notranslate"><span class="pre">callable(f)</span></code> 可以改用 <code class="docutils literal notranslate"><span class="pre">isinstance(f,</span> <span class="pre">collections.Callable)</span></code>。 <code class="xref py py-func docutils literal notranslate"><span class="pre">operator.isCallable()</span></code> 函数也已不复存在。</p></li>
<li><p class="translated">移除了 <code class="xref py py-func docutils literal notranslate"><span class="pre">coerce()</span></code>。 由于经典类已不复存在此函数也不再有用处。</p></li>
<li><p class="translated">移除了 <code class="xref py py-func docutils literal notranslate"><span class="pre">execfile()</span></code>。 原 <code class="docutils literal notranslate"><span class="pre">execfile(fn)</span></code> 请改用 <code class="docutils literal notranslate"><span class="pre">exec(open(fn).read())</span></code>。</p></li>
<li><p class="translated">移除了 <code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code> 类型。 请使用 <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>。 当前在 <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a> 模块中有多种不同类别的流可由 open 函数返回。</p></li>
<li><p class="translated">移除了 <code class="xref py py-func docutils literal notranslate"><span class="pre">reduce()</span></code>。 如果你确实需要它可使用 <a class="reference internal" href="../library/functools.html#functools.reduce" title="functools.reduce"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.reduce()</span></code></a>；不过，在百分之 99 的情况下用显式的 <a class="reference internal" href="../reference/compound_stmts.html#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a> 循环会有更好的可读性。</p></li>
<li><p class="translated">移除了 <code class="xref py py-func docutils literal notranslate"><span class="pre">reload()</span></code>。 请使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">imp.reload()</span></code>。</p></li>
<li><p class="translated">移除了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.has_key()</span></code> -- 请改用 <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">in</span></code></a> 运算符。</p></li>
</ul>
</section>
</section>
<section id="build-and-c-api-changes">
<h2 class="translated">构建和 C API 的改变<a class="headerlink" href="#build-and-c-api-changes" title="Link to this heading">¶</a></h2>
<p class="translated">由于时间约束，下面 C API 的变化列表 <em>非常</em> 不完整。</p>
<ul class="simple">
<li><p class="translated">已放弃对某些平台的支持，包括但不限于 Mac OS 9, BeOS, RISCOS, Irix 和 Tru64。</p></li>
<li><p class="translated"><span class="target" id="index-104"></span><a class="pep reference external" href="https://peps.python.org/pep-3118/"><strong>PEP 3118</strong></a>: 新的缓冲区 API。</p></li>
<li><p class="translated"><span class="target" id="index-105"></span><a class="pep reference external" href="https://peps.python.org/pep-3121/"><strong>PEP 3121</strong></a>: 扩展模块初始化与最终化。</p></li>
<li><p class="translated"><span class="target" id="index-106"></span><a class="pep reference external" href="https://peps.python.org/pep-3123/"><strong>PEP 3123</strong></a>: 使 <a class="reference internal" href="../c-api/structures.html#c.PyObject_HEAD" title="PyObject_HEAD"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyObject_HEAD</span></code></a> 与标准 C 一致。</p></li>
<li><p class="translated">已去除对受限执行的 C API 支持。</p></li>
<li><p class="translated"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyNumber_Coerce()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyNumber_CoerceEx()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyMember_Get()</span></code> 和 <code class="xref c c-func docutils literal notranslate"><span class="pre">PyMember_Set()</span></code> C API 已被移除。</p></li>
<li><p class="translated">新的 C API <a class="reference internal" href="../c-api/import.html#c.PyImport_ImportModuleNoBlock" title="PyImport_ImportModuleNoBlock"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyImport_ImportModuleNoBlock()</span></code></a>，类似于 <a class="reference internal" href="../c-api/import.html#c.PyImport_ImportModule" title="PyImport_ImportModule"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyImport_ImportModule()</span></code></a> 但不会因导入锁而阻塞（改为返回错误）。</p></li>
<li><p class="translated">重命名布尔转换的 C 层级槽位和方法: <code class="docutils literal notranslate"><span class="pre">nb_nonzero</span></code> 现在改为 <code class="docutils literal notranslate"><span class="pre">nb_bool</span></code>。</p></li>
<li><p class="translated">从 C API 中移除了 <code class="xref c c-macro docutils literal notranslate"><span class="pre">METH_OLDARGS</span></code> 和 <code class="xref c c-macro docutils literal notranslate"><span class="pre">WITH_CYCLE_GC</span></code>。</p></li>
</ul>
</section>
<section id="performance">
<h2 class="translated">性能<a class="headerlink" href="#performance" title="Link to this heading">¶</a></h2>
<p class="translated">综合而言 3.0 的改变使得 Python 3.0 运行 pystone 基准测试的速度比 Python 2.5 慢了约 10%。 其中最大的原因可能是移除了针对小整数的特别场景的处理。 虽然存在改进空间，但这将在 3.0 发布之后再进行！</p>
</section>
<section id="porting-to-python-3-0">
<h2 class="translated">移植到 Python 3.0<a class="headerlink" href="#porting-to-python-3-0" title="Link to this heading">¶</a></h2>
<p class="translated">对于将现有 Python 2.5 或 2.6 源代码移植到 Python 3.0，最佳的策略如下：</p>
<ol class="arabic simple" start="0">
<li><p class="translated">（必要前提：）启动良好的测试覆盖。</p></li>
<li><p class="translated">移植到 Python 2.6。 这应该不会比从 Python 2.x 到 Python 2.(x+1) 的正常移植更麻烦。 请确保所有的测试均能通过。</p></li>
<li><p class="translated">（仍然使用 2.6：） 打开 <code class="xref std std-option docutils literal notranslate"><span class="pre">-3</span></code> 命令行开关。 这将启用针对将在 3.0 中被移除（或修改）的特性的警告。 再次运行你的测试套件，并修复你收到相关警告的代码直至不再有任何警告，并且所有的测试仍然能通过。</p></li>
<li><p class="translated">对你的源代码树运行 <code class="docutils literal notranslate"><span class="pre">2to3</span></code> 源代码翻译器。 在 Python 3.0 中运行翻译后的结果。 手动修复任何剩余的问题，一至修复到所有的测试再度通过。</p></li>
</ol>
<p class="translated">不建议尝试编写可不加修改地同时运行于 Python 2.6 和 3.0 的源代码；你将不得不使用一种非常扭曲的代码风格，例如避免 <code class="docutils literal notranslate"><span class="pre">print</span></code> 语句、元类和许多其他特性。 如果你正在维护需要同时支持 Python 2.6 和 Python 3.0 的库，最佳做法是将上述的步骤 3 修改为编辑源代码的 2.6 版本并再次运行 <code class="docutils literal notranslate"><span class="pre">2to3</span></code> 翻译器，而不是修改源代码的 3.0 版本。</p>
<p class="translated">有关如何将 C 扩展移植到 Python 3.0，请参阅 <a class="reference internal" href="../howto/cporting.html#cporting-howto"><span class="std std-ref">将扩展模块移植到 Python 3</span></a>。</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">Python 3.0 有什么新变化</a><ul>
<li><a class="reference internal" href="#common-stumbling-blocks">常见的绊脚石</a><ul>
<li><a class="reference internal" href="#print-is-a-function">Print 是函数</a></li>
<li><a class="reference internal" href="#views-and-iterators-instead-of-lists">用视图和迭代器取代列表</a></li>
<li><a class="reference internal" href="#ordering-comparisons">排序比较</a></li>
<li><a class="reference internal" href="#integers">整数</a></li>
<li><a class="reference internal" href="#text-vs-data-instead-of-unicode-vs-8-bit">文本与数据而不是 Unicode 与 8 比特位</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overview-of-syntax-changes">语法变化概述</a><ul>
<li><a class="reference internal" href="#new-syntax">新语法</a></li>
<li><a class="reference internal" href="#changed-syntax">语法变化</a></li>
<li><a class="reference internal" href="#removed-syntax">移除的语法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-already-present-in-python-2-6">已存在于 Python 2.6 中的改变</a></li>
<li><a class="reference internal" href="#library-changes">库的修改</a></li>
<li><a class="reference internal" href="#pep-3101-a-new-approach-to-string-formatting"><strong>PEP 3101</strong>: 字符串格式化的新方式</a></li>
<li><a class="reference internal" href="#changes-to-exceptions">对异常的修改</a></li>
<li><a class="reference internal" href="#miscellaneous-other-changes">其他杂项修改</a><ul>
<li><a class="reference internal" href="#operators-and-special-methods">运算符与特殊方法</a></li>
<li><a class="reference internal" href="#builtins">内置对象</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">构建和 C API 的改变</a></li>
<li><a class="reference internal" href="#performance">性能</a></li>
<li><a class="reference internal" href="#porting-to-python-3-0">移植到 Python 3.0</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>上一主题</h4>
    <p class="topless"><a href="3.1.html"
                          title="上一章">Python 3.1 有什么新变化</a></p>
  </div>
  <div>
    <h4>下一主题</h4>
    <p class="topless"><a href="2.7.html"
                          title="下一章">Python 2.7 有什么新变化</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>当前页</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">报告代码错误</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.0.rst?plain=1"
            rel="nofollow">显示源码
        </a>
      </li>
    </ul>
  </div>
        </div>
<div id="sidebarbutton" title="折叠边栏">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="Related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="2.7.html" title="Python 2.7 有什么新变化"
             >下一页</a> |</li>
        <li class="right" >
          <a href="3.1.html" title="Python 3.1 有什么新变化"
             >上一页</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.14.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python的新变化</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Python 3.0 有什么新变化</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="search" name="q" id="search-box">
          <input type="submit" value="转到">
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    主题
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>自动</option>
        <option value="light">明亮</option>
        <option value="dark">黑暗</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">版权</a> 2001 Python Software Foundation.
    <br>
    本页面采用 Python 软件基金会许可证第 2 版授权。
    <br>
    文档中的示例、代码片段及其他代码内容额外采用零条款 BSD 许可证授权。
    <br>
    
      更多信息请参阅《<a href="/license.html"> 历史与许可 </a>》。<br>
    
    
    <br>

    Python 软件基金会是一家非营利性公司。
<a href="https://www.python.org/psf/donations/">请进行捐赠。</a>
<br>
    <br>
      最后更新于11月 25, 2025 (07:24 UTC) 。
    
      <a href="/bugs.html">发现了错误</a>？
    
    <br>

    使用<a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3 创建。
    </div>

  </body>
</html>