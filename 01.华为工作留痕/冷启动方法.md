# 什么是“冷启动”？

在Android开发和测试的语境中，“冷启动”指的是一个应用程序在**完全未运行**的状态下被启动的过程。

**具体来说，冷启动发生时：**

1. **应用进程不存在**：系统的进程列表中没有这个应用的进程。
2. **系统需要创建新进程**：系统必须为一个全新的应用创建一个新的进程。
3. **从头初始化应用**：应用需要从`Application`类的`onCreate()`方法开始，执行所有初始化工作（如初始化第三方库、创建全局变量等），然后才启动首屏Activity。

**与之相对的是“热启动”：**

- **热启动**是指应用虽然不在前台，但其进程仍然在后台存活。当你再次切换回这个应用时，系统只是将已有的进程带到前台，这个过程非常快，因为不需要重新初始化应用。

**冷启动的典型场景：**

- 设备重启后第一次打开应用。
- 应用被手动“强制停止”后再次打开。
- 系统为了释放资源，杀死了后台的应用进程，之后用户再次打开它。

**为什么开发者关心“冷启动”？**
因为冷启动的耗时是衡量一个应用性能好坏的关键指标之一。一个优化良好的应用应该有较短的冷启动时间，给用户流畅的第一印象。



# 冷启动方法

1. 应用宝安装对应 app

2. 打开 app

3. 获取当前页面的活动名称**（正在前台运行的Activity信息）**

   ```shell
   adb -s 127.0.0.1:8520 shell dumpsys window | grep mCurrentFocus
   ```

   回显：mCurrentFocus=Window{94d3468 u0 com.ss.android.ugc.aweme/com.ss.android.ugc.aweme.splash.SplashActivity)}

   **这个命令的用途：**

   1. **验证冷启动是否成功**：在你执行了冷启动操作（比如通过`adb shell am start`命令）后，你可以立即运行这个命令来确认你期望的Activity（如`MainActivity`）是否已经成功启动并位于前台。
   2. **自动化测试**：在UI自动化测试脚本中，经常用它来检查当前界面是否跳转到了正确的页面。
   3. **调试Activity栈**：当应用出现多个Activity，导航关系复杂时，可以用它快速定位当前顶部的Activity是哪一个。

4. 清除应用数据和缓存

   ```shell
   adb shell pm clear com.your.package.name

5. 得到时间

   ```
   adb -s 127.0.0.1:8520 shell am start -W -n com.ss.android.ugc.aweme/com.ss.android.ugc.aweme.splash.SplashActivity
   ```

   - `adb -s 127.0.0.1:8520 shell`：在指定设备（这里是IP为 `127.0.0.1:8520` 的模拟器）上执行一个shell命令。
   - `am start`：这是Android的Activity管理器命令，用于启动一个特定的应用组件。
   - `-W`：这是一个关键选项，代表 **Wait（等待）**。它会让命令一直等待，直到启动完成，然后**打印出启动耗时**。
   - `-n com.ss.android.ugc.aweme/com.ss.android.ugc.aweme.splash.SplashActivity`：指定要启动的组件。其中 `com.ss.android.ugc.aweme` 是抖音的包名，`com.ss.android.ugc.aweme.splash.SplashActivity` 是它的闪屏页/启动页Activity。

​	